---
status: active
priority: P1
version: 1.20.0
sprint: 37
started: 2026-01-08
updated: 2026-02-24
released: 2026-02-24
editor: hybrid-markdown++
next_focus: Fix 67 test file TypeScript errors
tests: 2280
unit_tests: 2280
e2e_tests: 109
test_file_errors: 67 (non-blocking, documented in docs/planning/TEST-FILE-TYPESCRIPT-ERRORS-2026-01-24.md)
tags:
  - adhd-friendly
  - distraction-free
  - tauri
  - react
  - academic
---

# Scribe

> ADHD-friendly distraction-free writer with projects, academic features, and CLI-based AI.

## Current Focus (Sprint 37)

### Next Up

1. **Fix 67 test file TypeScript errors** (~2.5h) — Non-blocking but noisy. Documented in `docs/planning/TEST-FILE-TYPESCRIPT-ERRORS-2026-01-24.md`
2. **v1.17.0 Three-Tab Sidebar System** (~20h) — Add Explorer tree tab alongside Compact/Card. Spec approved: `docs/specs/SPEC-three-tab-sidebar-2026-01-10.md`

### Active Backlog

| Item | Effort | Priority | Spec/Doc |
|------|--------|----------|----------|
| Database modularization (`database.rs` 1,935 lines) | 3h | P1 | Backlog |
| Quarto Sprint 34 (render integration, `:::` callouts, project cross-refs) | 10-12h | P2 | `SPEC-v115-quarto-enhancements-2026-01-07.md` |
| Child Project Identification Phase 2 (status grouping, hover preview, animations) | 9h | P2 | `.STATUS` history |
| `usePreferencesStore` Zustand store wrapping localStorage with cross-tab sync | 4h | P2 | Future (after `feature/settings-improvements`) |
| v2.0 LaTeX Editor Mode (full Overleaf-like editing) | 7 weeks | P3 | `docs/planning/PLAN-v2-latex-editor.md` |

---

## Recently Completed

### Session Timer Removal (2026-02-24) — PR #48

- Removed legacy session timer from breadcrumb bar (⏸/▶/↺ controls)
- Removed `sessionStartTime` prop chain from 5 components
- StatsPanel Duration card → Pomodoro count from `usePomodoroStore`
- Cleaned 4 localStorage keys and ~50 lines orphaned CSS
- Net: -95 lines, 2,280 tests (2 session-duration tests removed)

### Settings Infrastructure Improvements (2026-02-24) — PR #47

- Reusable `SettingsToggle` component with full accessibility
- `usePreferences` hook with cached state + event-based sync
- `SHORTCUTS` registry (25 shortcuts) with `matchesShortcut()` helper
- Migrated `SettingsModal.tsx` to `usePreferences` hook
- 27 new tests (2,282 total)

### v1.19.0 (2026-02-23) — Pomodoro Focus Timer (Released)

- Pomodoro timer in editor status bar (start/pause click, reset right-click)
- Zustand store with symmetric callbacks: `tick(onComplete, onBreakComplete)`
- Auto-save on work completion, gentle break toasts
- Focus Timer settings in General tab (5 new preferences)
- Auto-pin new projects to sidebar
- 62 new tests (2,282 total)

### v1.18.0 (2026-02-22) — Sidebar Vault Expansion Fix + DexieError2 Fix

- Fixed vault dots showing wrong project's notes (PR #43)
- Fixed sidebar breadcrumb not updating on vault selection
- Fixed DexieError2 race condition in browser mode (singleton ready promise)
- 3 new tests (2,190 total)

### v1.16.2 (2026-01-24) — Tech Debt Phase 1

- App.tsx & SettingsModal.tsx modularization (-881 lines)
- Removed 364 lines unused code
- Settings/ folder with 11 extracted modules

### v1.16.1 (2026-01-23) — Component Extraction

- KeyboardShortcutHandler, EditorOrchestrator, settings tabs extracted

### v1.16.0 (2026-01-10) — Icon-Centric Sidebar

- Per-icon accordion expansion with preferred mode memory
- `IconBar.tsx` + `ExpandedIconPanel.tsx` architecture
- Removed 5,724 lines deprecated code
- 102 new tests (2,133 total)

### v1.15.x (Sprint 35-36) — UI Enhancements + Mode Consolidation

- 7 UI Quick Wins (Icon Legend, Resize Handle, Status Dots, Keyboard Nav, Empty States, Drag-Drop, Recent Notes)
- 4 Customization features (Custom Icons, Auto-Collapse, Contextual Tooltips, Width Presets)
- Sidebar Mode Consolidation (7 phases: universal expansion, smart persistence, preset-aware cycling)
- Quarto autocomplete (YAML, chunk options, cross-references)
- Child Project Identification Phase 1 (ProjectAvatar, 2-line layout)

---

## Stack

| Layer | Tech |
|-------|------|
| Shell | Tauri 2 |
| UI | React 18 |
| Editor | CodeMirror 6 (HybridEditor++) |
| Styling | Tailwind |
| State | Zustand |
| Database | SQLite (rusqlite) |
| AI | Claude/Gemini CLI |
| Unit Tests | Vitest + Testing Library |
| E2E Tests | Playwright |

---

## Key Files

| Path | Purpose |
|------|---------|
| `src/renderer/src/App.tsx` | Main app shell (~1,738 lines) |
| `src/renderer/src/store/useAppViewStore.ts` | Sidebar + UI state (Zustand) |
| `src/renderer/src/components/sidebar/` | Sidebar components (IconBar, ExpandedIconPanel, etc.) |
| `src/renderer/src/components/Settings/` | Modular settings (11 files) |
| `src/renderer/src/lib/quarto-completions.ts` | Quarto autocomplete engine |
| `src-tauri/src/database.rs` | SQLite backend (1,935 lines — needs modularization) |
| `docs/specs/` | Active specs |
| `docs/archive/` | Historical sprint logs and completed specs |

---

## Spec Status Summary

| Spec | Status | Target |
|------|--------|--------|
| Pomodoro Timer | Released | v1.19.0 |
| Settings Improvements | In Progress | v1.20.0 |
| Three-Tab Sidebar | Design Approved | v1.17.0 |
| Quarto Enhancements | Partially Implemented | v1.15+ |
| LaTeX Editor | Proposal | v2.0 |
| Left Sidebar Redesign | Superseded by v1.16.0 | — |
| Two-Click Icon Expansion | Superseded by v1.16.0 | — |
| Smart Icons | Implemented | v1.16.0 |
| Mode Consolidation | Implemented | v1.15.x |
| Settings Enhancement | Implemented | v1.8.0 |

---

> Full sprint history: `docs/archive/STATUS-HISTORY-2025-2026.md`
