---
status: active
priority: P1
progress: 60
version: 1.2.2
sprint: 26
updated: 2025-12-30
editor: hybrid-markdown++
next_sprint: 27
next_focus: Sidebar Consolidation + AI Integration
tests: 759+282
unit_tests: 759
e2e_tests: 282
tags:
  - adhd-friendly
  - distraction-free
  - tauri
  - react
  - academic
  - projects
  - cli
---

# Scribe

> **ADHD-friendly distraction-free writer** with projects, academic features, and CLI-based AI.

## Current Sprint

**Sprint 25: Plan B UI Redesign + v1.2.1 Release** âœ… Complete (2025-12-30)

### Sprint 25: Plan B UI - Obsidian Style + Gradient Tabs
- [x] **Phase 1: Editor Tabs** âœ… Complete
  - [x] EditorTabs component with gradient accent (Style 5)
  - [x] Tab state management in useAppViewStore
  - [x] localStorage persistence for tabs
  - [x] Mission Control pinned as first tab
  - [x] Keyboard shortcuts (âŒ˜1-9 switch, âŒ˜W close)
  - [x] Middle-click to close tabs
- [x] **Phase 1.5: Project Note Display** âœ… Complete
  - [x] Remove redundant Recent Notes from sidebar
  - [x] Add expandable note tiles to Card Mode (Option B)
  - [x] Accordion-style expansion (one project at a time)
  - [x] Up to 6 recent notes per project
  - [x] Empty state with "Create first note" CTA
- [x] **Phase 5: Right Sidebar + Test Cleanup** âœ… Complete
  - [x] Icon-only collapsed mode for right sidebar
  - [x] Keyboard shortcuts for right sidebar tabs (âŒ˜[ / âŒ˜])
  - [x] Fix source file TypeScript errors (8 files)
  - [x] Fix test file TypeScript errors (59â†’0, 13 files)
  - [x] Create testUtils.ts mock factories
  - [x] **666 tests passing, 0 TypeScript errors**
- [x] **Phase 6: Playwright E2E Test Suite** âœ… Complete
  - [x] Playwright infrastructure (config, fixtures, page objects)
  - [x] 14 spec files covering all UI features
  - [x] 129 E2E tests passing across:
    - Smoke tests (4), Navigation (8), Tabs (13)
    - Editor (12), Left Sidebar (14), Right Sidebar (10)
    - Keyboard Shortcuts (15), Modals (10), Mission Control (8)
    - Projects (8), Notes (10), Focus Mode (5), Themes (6)
    - Mission Sidebar (6)
    - Tab Drag Reorder (3 new tests)
  - [x] data-testid attributes added to key components
  - [x] IndexedDB isolation per test context
  - [x] **795 total tests (666 unit + 129 E2E)**
- [x] **v1.2.1 Release** âœ… Complete (2025-12-30)
  - [x] Toast notifications (success/error feedback)
  - [x] Demo data seeding for Tauri (Migration 007)
  - [x] Unified seed data between browser/Tauri
  - [x] 47 new E2E tests (25 feature + 22 edge case/stress)
  - [x] WebDriver research documented
  - [x] Git workflow documented (protected main + worktrees)
  - [x] **1,041 total tests (759 unit + 282 E2E)**

**Design Document:** `SCHEMATIC-LEFT-SIDEBAR-REDESIGN.md`

---

### Sprint 26: Activity Bar Polish + Bug Fixes (Complete âœ…)

**High Priority (P1):**
- [x] Activity Bar badges âœ… - IconBarMode shows note count per project
- [x] Browser mode indicator âœ… - HybridEditor shows "Browser Mode" badge
- [x] Wiki link backlink tracking in browser mode âœ… - browser-api.ts getBacklinks

**Medium Priority (P2):**
- [x] Keyboard shortcut for right sidebar collapse (âŒ˜â‡§]) âœ…
- [x] Editor tabs persistence across restarts âœ… - useAppViewStore saveTabs
- [x] âŒ˜â‡§T reopen closed tab âœ… - reopenLastClosedTab + closedTabsHistory

**Bug Fixes (P1):**
- [x] Tauri API serialization âœ… - prepareNoteForTauri/parseNoteFromTauri for properties field
- [x] Daily note Today button âœ… - Added openNoteTab() call to display note in editor
- [x] Error toast persistence âœ… - Errors persist until dismissed with Copy/OK buttons
- [x] create_note project_id âœ… - Added missing field to CreateNoteInput struct

**Lower Priority (P3):**
- [ ] Phase 2: Vault Sidebar (Obsidian-style file tree)
- [ ] Phase 3: Status Bar (VS Code-style bottom bar)
- [x] Playwright E2E tests âœ… (282 tests)

---

### Sprint 27: Sidebar Consolidation (Planned)

**Design Document:** `BRAINSTORM-sidebar-consolidation-2025-12-29.md`

**Phase 1: Foundation**
- [ ] Option A: Add Stats tab to right sidebar (merge HudPanel)
- [ ] Option I: Status bar quick chat icon

**Phase 2: AI Integration (Choose ONE)**
- [ ] Option H: Claude as full sidebar tab (VS Code style)
- [ ] Option F: Split-pane with docked Claude bottom
  - Evolution path: If cramped â†’ migrate to Option G
- [ ] Option K: OpenCode-style AI Workspace (rich UI)

**Phase 3: Power Features**
- [ ] Option J: Terminal tab (xterm.js) - Feasibility: âœ… HIGH
- [ ] Option G: Ambient AI (âŒ˜K everywhere, inline suggestions)

**Research Completed:**
- OpenCode TUI patterns (github.com/opencode-ai/opencode)
- Cursor 2.0 agent-centric UI (cursor.com/features)
- xterm.js React integration (react-xtermjs)

---

### Sprint 24: Three-State Collapsible Sidebar âœ… (2025-12-27)
- [x] Icon mode (48px) - status dots only
- [x] Compact mode (240px) - project list with stats
- [x] Card mode (320px+) - full project cards
- [x] Resize handle with snap points
- [x] âŒ˜0 keyboard shortcut to cycle modes
- [x] State persistence (localStorage + Zustand)
- [x] Project switching with toggle behavior
- [x] Active project indicator (all modes)
- [x] Progress bars in sidebar
- [x] Rich tooltips on icon hover (name, status, note count)
- [x] Recent Notes filtered by selected project

### Sprint 23: Mission Control & Native Menu âœ…
- [x] New Project button in QuickActions (âŒ˜â‡§P)
- [x] Improved empty state with Create Project CTA
- [x] Native macOS menu bar (File/Edit/View/Window/Help)
- [x] Menu events wired to frontend actions
- [x] RecentNotes component (5 most recent)
- [x] Project stats (note count, word count)
- [x] Total stats in Mission Control header
- [x] Mission Control button in Ribbon (navigation fix)

### Sprint 22: Editor Modes & Custom CSS âœ…
- [x] Three-mode editor toggle (Source / Live Preview / Reading)
- [x] Keyboard shortcuts: âŒ˜1, âŒ˜2, âŒ˜3, âŒ˜E (cycle)
- [x] Custom CSS support in Settings > Appearance
- [x] EditorMode type in preferences.ts
- [x] CSS injection in App.tsx
- [x] Escape exits Reading mode

### Sprint 20: Scribe CLI âœ…
- [x] `scribe.zsh` CLI script (607 lines)
- [x] Commands: new, daily, search, capture, list, open, edit, tags, folders, stats
- [x] FTS5 full-text search integration
- [x] Aliases: sd, sc, ss, sl, sn
- [x] Tab completion for commands/folders
- [x] Auto-sourced in `.zshrc`

### Sprint 19: Note Search âœ…
- [x] SearchPanel.tsx component
- [x] âŒ˜F keyboard shortcut
- [x] Scope selector (All Notes / Current Project)
- [x] Debounced 150ms real-time search
- [x] Keyboard navigation (â†‘â†“ Navigate, â†µ Open, Esc Close)
- [x] Highlighted search matches with snippets

### Sprint 18: Project System âœ…
- [x] Database schema (migration_004: projects table, note.project_id)
- [x] Rust CRUD commands (create/get/list/update/delete/assign)
- [x] Zustand store with localStorage persistence
- [x] ProjectSwitcher dropdown component
- [x] CreateProjectModal component
- [x] Project-scoped note loading in App.tsx
- [x] 5 project types: research, teaching, r-package, r-dev, generic

### Sprint 17: UI Polish + ADHD Enhancements âœ…
- [x] Celebration micro-interactions (pulse at milestones)
- [x] Enhanced status bar (session timer, word delta, streak)
- [x] Keyboard shortcut cheatsheet (âŒ˜?)
- [x] CSS animations for celebrations (respects reduced-motion)
- [x] Session tracking (time since first keystroke)
- [x] Better mode toggle (pill-style)

**Sprint 16: Tags Panel Core Features** âœ… Complete
- [x] Orphan tag detection (scans notes for unregistered `#tags`)
- [x] Unregistered Tags section with warning styling
- [x] Register single/all tags buttons
- [x] Right-click context menu (Rename/Delete)
- [x] `tags` added to DEFAULT_NOTE_PROPERTIES (YAML key)

**Sprint 15: Tags Panel Quick Wins** âœ… Complete
- [x] Search/filter bar with real-time filtering
- [x] Recent tags section (tracks last 8, shows top 5)
- [x] Compact mode toggle (reduces padding/fonts)

**Sprint 14: Knowledge Graph & Templates** âœ… Complete
- [x] Knowledge Graph visualization (D3 force-directed)
- [x] Daily Notes templates (5 built-in + custom)
- [x] Markdown export with frontmatter
- [x] Tag hierarchy (path notation: `research/statistics`)
- [x] Backlinks panel improvements

**Sprint 11: Academic Features** âœ… Complete
- [x] 10 built-in themes (5 dark, 5 light)
- [x] Auto-theme by time of day
- [x] Theme colors apply to editor area
- [x] 14 ADHD-friendly font recommendations

**Sprint 10: Global Hotkey + Commands** âœ… Complete (2024-12-25)
- [x] Global hotkey âŒ˜â‡§N opens app from anywhere
- [x] Command palette âŒ˜K with 6 quick actions
- [x] Autocomplete positioning follows cursor (fixed)
- [x] Accessibility improvements (DialogTitle, aria-labels)
- [x] Comprehensive test suite: **300 tests passing**
- [x] Integration tests added (31 new tests)

**Test Coverage:**
| Test File | Tests |
|-----------|-------|
| Themes.test.ts | 101 |
| Academic.test.ts | 67 |
| Validation.test.ts | 54 |
| Tags.test.tsx | 52 |
| HybridEditor.test.tsx | 37 |
| BlockNoteEditor.test.tsx | 35 |
| Autocomplete.test.tsx | 34 |
| Integration.test.tsx | 32 |
| AcademicComponents.test.tsx | 25 |
| CommandPalette.test.tsx | 24 |
| Components.test.tsx | 16 |
| WikiLinks.test.tsx | 16 (7 skipped) |
| Debug.test.ts | 16 |
| NotesStore.test.tsx | 13 |

---

## Sprint Progress

| Phase | Sprint | Focus | Status |
|-------|--------|-------|--------|
| **1** | 8 | Editor Foundation | âœ… 100% |
| 1 | 9 | Editor Enhancement | âœ… 100% |
| 1 | 10 | Hotkey + Commands | âœ… 100% |
| 1 | 10.5 | Theme & Font System | âœ… 100% |
| **2** | 11 | Academic Features | âœ… 100% |
| 2 | 12 | UI Polish & Micro-interactions | âœ… 100% |
| **3** | 14 | Knowledge Graph & Templates | âœ… 100% |
| **4** | 15 | Tags Panel Quick Wins | âœ… 100% |
| 4 | 16 | Tags Panel Core Features | âœ… 100% |
| **5** | 17 | UI Polish + ADHD Enhancements | âœ… 100% |
| **v1.1** | 18 | Project System | âœ… 100% |
| v1.1 | 19 | Note Search (âŒ˜F) | âœ… 100% |
| v1.1 | 20 | Scribe CLI | âœ… 100% |
| **v1.3** | 22 | Editor Modes + Custom CSS | âœ… 100% |
| **v1.4** | 23 | Mission Control + Native Menu | âœ… 100% |
| **v1.5** | 24 | Three-State Sidebar | âœ… 100% |
| **v1.6** | 25 | Plan B UI Redesign | âœ… 50% |

**Total: v1.2.1 released (1,041 tests: 759 unit + 282 E2E)**

---

## Future Plans (Backlog)

| Sprint | Focus | Priority | Status |
|--------|-------|----------|--------|
| 26/27 | Playwright E2E Testing | P2 | ðŸ“‹ Planned |
| TBD | SwiftUI Native Port | P3 | ðŸ“‹ Researched |

**Playwright E2E:** Add 20-30 E2E tests for user journeys, context menus, state reactivity.
See: `docs/planning/FUTURE-PLAYWRIGHT-E2E.md`

**SwiftUI Port:** Parallel development branch for native macOS experience.
See: `BRAINSTORM-TAURI-TO-SWIFTUI.md`, worktree at `~/.git-worktrees/scribe/swiftui-native`

---

## Completed Sprints

| Sprint | Focus | Tests |
|--------|-------|-------|
| 1-5 | Foundation (Tauri, SQLite, Editor, PARA, Search) | âœ… |
| 6 | Wiki Links & Backlinks | âœ… |
| 7 | Tags System | 52 |
| 8 | Editor Foundation | âœ… |
| 9 | Editor Enhancement | 125 |
| 10 | Hotkey + Commands + Tests | 300 |
| 10.5 | Theme & Font System | 407 |
| 11 | Academic Features | 487 |
| 12 | UI Polish & Micro-interactions | 483 |
| 14 | Knowledge Graph & Templates | 483 |
| 15 | Tags Panel Quick Wins | 483 |
| 16 | Tags Panel Core Features | 483 |
| 17 | UI Polish + ADHD Enhancements | 483 |
| 18 | Project System | 483 |
| 19 | Note Search (âŒ˜F) | 483 |
| 20 | Scribe CLI | 483 |
| 22 | Editor Modes + Custom CSS | 483 |
| 23 | Mission Control + Native Menu | 483 |
| 24 | Three-State Collapsible Sidebar | 518 |
| 25 | Plan B UI (Phase 1+5+6) | 795 (666 unit + 129 E2E) |

---

## Key Features

**Three-State Sidebar (v1.5):**
- Icon mode (48px) - minimal, status dots only
- Compact mode (240px) - project list with stats
- Card mode (320px+) - full project cards with details
- âŒ˜0 cycles through modes
- Resize handle with snap points
- Project switching with toggle behavior
- Recent Notes filtered by selected project

**Mission Control (v1.4):**
- Dashboard with project cards and stats
- Recent Notes section (5 most recent)
- New Project button (âŒ˜â‡§P)
- Project stats (note count, word count)
- Total stats in header

**Native macOS Menu (v1.4):**
- Complete menu bar: File, Edit, View, Window, Help
- All keyboard shortcuts visible in menus
- Menu events trigger frontend actions
- Documentation and GitHub links

**Editor Modes (v1.3):**
- Three-mode toggle: Source / Live Preview / Reading
- Keyboard shortcuts: âŒ˜1, âŒ˜2, âŒ˜3, âŒ˜E (cycle)
- Escape exits Reading mode

**Custom CSS (v1.3):**
- Settings > Appearance > Custom CSS
- Enable/disable toggle
- Live CSS injection
- Reset to default option

**Editor:**
- HybridEditor++ (contenteditable + markdown preview)
- Live wiki-link `[[...]]` highlighting with cursor-following autocomplete
- Live tag `#tag` highlighting with autocomplete
- Word count, mode toggle (âŒ˜E)
- Focus mode (âŒ˜â‡§F)

**Project System (v1.1):**
- 5 project types: research, teaching, r-package, r-dev, generic
- Project switcher dropdown in sidebar
- Project-scoped note filtering
- Zustand store with localStorage persistence
- Database migration for projects table

**Note Search (v1.1):**
- SearchPanel with âŒ˜F shortcut
- Scope selector (All Notes / Current Project)
- Debounced 150ms real-time search
- Keyboard navigation (â†‘â†“/â†µ/Esc)
- Highlighted matches with snippets

**Scribe CLI (v1.1):**
- Terminal-based note access via `scribe` command
- Commands: new, daily, search, capture, list, open, edit, tags, folders, stats
- Aliases: sd, sc, ss, sl, sn
- FTS5 full-text search
- Tab completion

**Themes & Fonts:**
- 10 built-in ADHD-friendly themes (5 dark, 5 light)
- Theme colors apply to entire editor (including editor area)
- Auto-theme by time of day (light 6am-6pm)
- Custom theme creator with live preview
- Import/export themes (JSON, Base16 YAML, URL)
- Theme keyboard shortcuts (Cmd+Alt+0-9)
- 14 recommended ADHD-friendly fonts
- One-click Homebrew font installation
- Font settings (family, size, line height)

**Commands:**
- Global hotkey âŒ˜â‡§N
- Command palette âŒ˜K
- Quick actions: Create, Daily, Focus, Sync, Claude, Gemini
- Keyboard shortcuts: âŒ˜N, âŒ˜D, âŒ˜B, âŒ˜â‡§B, âŒ˜F, âŒ˜?

**Academic:**
- MathJax 3 for LaTeX rendering ($...$ inline, $$...$$ display)
- Citation autocomplete (@trigger)
- BibTeX/Zotero integration
- Export to PDF, Word, LaTeX, HTML, Markdown (via Pandoc)
- 5 citation styles (APA, Chicago, MLA, IEEE, Harvard)

**Accessibility:**
- Screen reader support (DialogTitle, DialogDescription)
- Aria labels on interactive elements
- Keyboard navigation

---

## Stack

| Layer | Tech |
|-------|------|
| Shell | Tauri 2 |
| UI | React 18 |
| Editor | HybridEditor++ |
| Styling | Tailwind |
| State | Zustand |
| Database | SQLite (rusqlite) |
| AI | Claude/Gemini CLI |
| Unit Testing | Vitest + Testing Library |
| E2E Testing | Playwright |

---

## Files

- [PROJECT-DEFINITION.md](PROJECT-DEFINITION.md) - Scope & roadmap
- [CHANGELOG.md](CHANGELOG.md) - Version history
- [TESTS_SUMMARY.md](TESTS_SUMMARY.md) - Test coverage
- [CLAUDE.md](CLAUDE.md) - AI guidance
- [docs/planning/](docs/planning/) - Sprint plans
## last_active: 2025-12-30
## streak: 3
