---
status: active
priority: P1
progress: 50
version: 1.14.0
sprint: 34
started: 2026-01-08
updated: 2026-01-09
editor: hybrid-markdown++
next_sprint: 35
next_focus: Left Sidebar Redesign (Phase 3 - Child Project ID)
tests: 2015
unit_tests: 2015
e2e_tests: 30
tags:
  - adhd-friendly
  - distraction-free
  - tauri
  - react
  - academic
  - projects
  - cli
---

# Scribe

> **ADHD-friendly distraction-free writer** with projects, academic features, and CLI-based AI.

## Current Sprint

### v1.16 Left Sidebar Redesign (Sprint 34) - SPEC APPROVED âœ…

**Status:** âœ… Spec approved, ready for Phase 1 implementation
**Spec:** `docs/specs/SPEC-left-sidebar-redesign-2026-01-08.md` (v1.1)
**Brainstorm:** `docs/BRAINSTORM-left-sidebar-layouts-2026-01-08.md`
**UX Analysis:** `docs/specs/UX-ANALYSIS-LEFT-SIDEBAR-2026-01-08.md`
**Architecture:** `docs/mission-sidebar-state-flow.md`
**Branch:** `feat/sidebar-v2`
**Worktree:** `~/.git-worktrees/scribe/sidebar-v2`

**Goal:** ADHD-friendly "Focus First" sidebar with progressive disclosure

**Design Decisions (All Approved):**
- âœ… Icon mode (48px) default - minimal clutter
- âœ… 5 pinned vaults max (Inbox + 4 custom)
- âœ… Inbox shows recent 5 notes only
- âœ… Activity Bar with 3 icons (Search, Daily, Settings)
- âœ… Mode switcher: Both âŒ˜0 + header icon

#### Sprint 34: Phase 1 - Icon Mode Enhancements âœ… COMPLETE

**Completed:** 2026-01-08
**Commit:** `0d19e64` feat(sidebar): Phase 1 - Tooltip & Activity Bar components

| Task | Effort | Priority | Status |
|------|--------|----------|--------|
| Tooltip component (500ms delay) | 1h | P1 | âœ… Done |
| Activity Bar component (3 icons) | 2h | P1 | âœ… Done |
| Integrated Tooltip into IconBarMode | 30m | P1 | âœ… Done |
| Wired Activity Bar handlers | 30m | P1 | âœ… Done |
| Colored project dots | - | P1 | âœ… Already exists (StatusDot) |

**Files Created:**
- `src/renderer/src/components/sidebar/Tooltip.tsx` (157 lines)
- `src/renderer/src/components/sidebar/ActivityBar.tsx` (57 lines)
- `src/renderer/src/__tests__/ActivityBar.test.tsx` (112 tests)

**Files Modified:**
- `src/renderer/src/components/sidebar/IconBarMode.tsx`
- `src/renderer/src/components/sidebar/MissionSidebar.tsx`
- `src/renderer/src/App.tsx`

**Implementation Method:**
- Parallel agent development (2 agents)
- Sequential integration
- Total time: ~15 minutes

#### Sprint 34: Phase 2 - Inbox Pinning âœ… COMPLETE

**Completed:** 2026-01-08
**Commit:** `9aa6b2f` feat(sidebar): Phase 2 - Inbox Pinning with amber accent

| Task | Effort | Priority | Status |
|------|--------|----------|--------|
| InboxButton component (amber themed) | 2h | P1 | âœ… Done |
| Unread count logic (project_id = null) | 1h | P1 | âœ… Done |
| CSS styling (amber accent #f59e0b) | 1h | P1 | âœ… Done |
| Quick capture shortcut (âŒ˜â‡§C) | - | P1 | âœ… Already wired |

**Features:**
- Dedicated Inbox button at top of Icon Mode (permanent position)
- Amber accent color (#f59e0b) to differentiate from projects
- Unread badge showing count of unassigned notes
- Smart tooltip showing count and status
- Active indicator when Inbox view is selected

**Files Created:**
- `src/renderer/src/components/sidebar/InboxButton.tsx` (42 lines)

**Files Modified:**
- `src/renderer/src/components/sidebar/IconBarMode.tsx` (integrated InboxButton)
- `src/renderer/src/index.css` (+76 lines amber-themed CSS)

**Implementation Method:**
- Direct implementation (no agents needed)
- Total time: ~10 minutes

#### Sprint 34: Phase 3 - Child Project Identification ðŸ”„ IN PROGRESS

**Status:** ðŸ“‹ Spec Complete, Ready for Phase 1 Implementation
**Started:** 2026-01-09
**Brainstorm:** `docs/BRAINSTORM-child-project-identification-2026-01-09.md`
**UX Analysis:** Completed by UX agent (aa014e6)

**Goal:** Make child projects visually identifiable under expanded smart icons

**Design Approved:**
- âœ… Expand sidebar to 240px when smart icon opens (vs 48px collapsed)
- âœ… First-letter icons auto-generated for all child projects
- âœ… Project names visible (truncated if needed)
- âœ… Rich metadata: note count + last edited time
- âœ… Status grouping at 10+ projects (ACTIVE/PAUSED/COMPLETE)
- âœ… Hover preview with recent notes
- âœ… 200ms ADHD-friendly animations

**Phase 1: Foundation (2h) - READY FOR IMPLEMENTATION**

| Task | Effort | Priority | Status |
|------|--------|----------|--------|
| Expand sidebar width logic (48px â†’ 240px) | 20m | P1 | [ ] Pending |
| Create ProjectAvatar component (first letter icon) | 30m | P1 | [ ] Pending |
| Update ExpandedChildProjects (2-line layout) | 40m | P1 | [ ] Pending |
| Add CSS styling (expanded child project cards) | 30m | P1 | [ ] Pending |

**Expected Outcome:**
```
Before: [â—] â† Just a dot
After:  [M] Mediation â€¢ 12 notes â€¢ 2h ago
```

**Phase 2: Rich Interactions (9h) - PLANNED**

| Task | Effort | Priority | Status |
|------|--------|----------|--------|
| Status grouping (10+ projects) | 3h | P2 | [ ] Pending |
| Hover preview tooltip | 2.5h | P2 | [ ] Pending |
| Smooth animations (stagger, expand/collapse) | 1.5h | P2 | [ ] Pending |
| Keyboard navigation (â†‘â†“ Enter Esc) | 2h | P2 | [ ] Pending |

**Phase 3: Advanced Features (18h) - OPTIONAL**

| Task | Effort | Priority | Status |
|------|--------|----------|--------|
| Mini-search for 20+ projects | 4h | P3 | [ ] Pending |
| Custom emoji icons | 6h | P3 | [ ] Pending |
| Progress ring visualization | 3h | P3 | [ ] Pending |
| Drag-to-reorder | 5h | P3 | [ ] Pending |

**New Components to Create:**
- `ProjectAvatar.tsx` - First letter icon component
- `ExpandedSmartIcon.tsx` - Replaces ExpandedChildProjects (Phase 2)
- `ProjectTooltip.tsx` - Hover preview component (Phase 2)
- `ProjectGroup.tsx` - Status grouping (Phase 2)

**Implementation Plan (4 Phases, 28 hours total):**
- Phase 1: Icon Mode Enhancements (6h) âœ… Complete
- Phase 2: Inbox Pinning (8h) âœ… Complete
- Phase 3: Child Project Identification (29h total, 2h Phase 1) ðŸ”„ In Progress
- Phase 4: Visual Polish (6h)

---

### v1.15 Quarto Enhancements (Sprint 33-36) - IN PROGRESS ðŸš§

**Status:** ðŸš§ Sprint 33 COMPLETE, Sprint 34 Next
**Spec:** `docs/specs/SPEC-v115-quarto-enhancements-2026-01-07.md`
**Brainstorm:** `docs/specs/BRAINSTORM-editor-polish-quarto-2026-01-07.md`
**UI/UX Design:** `docs/specs/UXUI-quarto-support-2026-01-07.md`
**Branch:** `feat/quarto-v115`
**Worktree:** `~/.git-worktrees/scribe/quarto-v115`

**Goal:** First-class Quarto support for academic users

#### Sprint 33: Core Autocomplete Foundation - COMPLETE âœ…

| Feature | Effort | Priority | Status |
|---------|--------|----------|--------|
| YAML frontmatter autocomplete | 2-3h | P1 | âœ… Done |
| Chunk options autocomplete (#\|) | 2h | P1 | âœ… Done |
| Cross-reference autocomplete (@fig-, @tbl-) | 3-4h | P1 | âœ… Done |
| Quarto demo document | 30m | P2 | âœ… Done |

**Implementation (2026-01-08):**
- `quarto-completions.ts` (729 lines) - Full autocomplete implementation
- 40+ YAML keys with nested value completions
- 25+ chunk options with value suggestions
- Cross-reference scanning with caption extraction
- 32 new tests (all passing)

**Commits:**
- `0d863f7` feat(quarto): Add autocomplete for YAML, chunk options, and cross-refs
- `7b9fb13` feat(demo): Add Quarto document example to seed data
- `bdcc3bd` chore: Update package-lock.json

**New Files:**
- `src/renderer/src/lib/quarto-completions.ts`
- `src/renderer/src/__tests__/QuartoCompletions.test.ts`

**Modified Files:**
- `src/renderer/src/components/CodeMirrorEditor.tsx`
- `src/renderer/src/lib/seed-data.ts`
- `src/renderer/src/lib/browser-db.ts`

#### Sprint 34: Quarto Integration (~10-12 hours)

| Feature | Effort | Priority | Status |
|---------|--------|----------|--------|
| Quarto callout syntax (:::) | 1-2h | P2 | [ ] Pending |
| Quarto render integration | 4-5h | P2 | [ ] Pending |
| Project-wide cross-references ðŸ†• | 4-5h | P1 | [ ] Pending |

**Backend:**
- New: `src-tauri/src/quarto/mod.rs` (module structure)
- New: `src-tauri/src/quarto/cli.rs` (CLI detection + render)
- New: `src-tauri/src/quarto/crossref.rs` (label scanning)
- Modified: `src-tauri/src/commands.rs`

#### Sprint 35: Execution & Errors (~15-18 hours) ðŸ†•

| Feature | Effort | Priority | Status |
|---------|--------|----------|--------|
| Single chunk execution (R/Python/Bash) | 6-8h | P2 | [ ] Pending |
| Error panel (bottom drawer) | 5-6h | P2 | [ ] Pending |
| Zotero + BibTeX integration | 4-5h | P2 | [ ] Pending |

**New Files:**
- `src-tauri/src/quarto/chunk.rs` (execution with timeout)
- `src-tauri/src/quarto/error.rs` (error parsing)
- `src/renderer/src/components/ErrorPanel.tsx`

**Backend Tauri Commands (7 new):**
1. `is_quarto_available` - Check Quarto installation
2. `quarto_render` - Render document (async)
3. `execute_chunk` - Run single code chunk (async)
4. `kill_chunk_execution` - Cancel running chunk
5. `get_crossref_index` - Get labels for autocomplete
6. `update_crossref_index` - Update on note save
7. `build_crossref_index` - Full rebuild for project

#### Sprint 36: Preview & Polish (~8-10 hours) ðŸ†•

| Feature | Effort | Priority | Status |
|---------|--------|----------|--------|
| Live slide preview | 6-8h | P3 | [ ] Pending |
| Bug fixes & polish | 2-4h | P1 | [ ] Pending |

**Tests:** ~170 new tests planned (across 10 phases)
**Total Effort:** ~40-45 hours across 4 sprints

---

### v2.0 Markdown Polish (Bundled with LaTeX Editor) - PLANNED ðŸ“‹

**Status:** ðŸ“‹ Planning Complete
**Bundled With:** v2.0 LaTeX Editor Mode
**Spec:** `docs/planning/PLAN-v2-latex-editor.md`

**Goal:** Enhanced markdown editing experience

| Feature | Effort | Category |
|---------|--------|----------|
| Language picker dropdown | 3-4h | Code Blocks |
| Source mode syntax highlighting | 4-5h | Code Blocks |
| Copy button for code blocks | 1-2h | Code Blocks |
| Line numbers | 2h | Code Blocks |
| Visual table editor | 8-10h | Tables |
| Tab navigation in tables | 2-3h | Tables |
| Auto-alignment | 3-4h | Tables |
| CSV paste to table | 2-3h | Tables |
| Link preview tooltip | 2h | Links/Images |
| Image preview inline | 3-4h | Links/Images |
| Drag-drop images | 4-5h | Links/Images |
| Link autocomplete | 2-3h | Links/Images |

**Total Effort:** ~40 hours (bundled with v2.0)

---

### v2.0 LaTeX Editor Mode (Major Feature) - PLANNED ðŸ“‹

**Status:** ðŸ“‹ Planning Complete
**Branch:** `feat/latex-editor-v2`
**Worktree:** `~/.git-worktrees/scribe/latex-v2`
**Spec:** `docs/planning/PLAN-v2-latex-editor.md`

**Goal:** Full Overleaf-like LaTeX editing experience

| Phase | Duration | Deliverable |
|-------|----------|-------------|
| 1. Foundation | 2 weeks | Multi-format architecture (database + API) |
| 2. Editor | 1 week | LaTeXEditor component |
| 3. Compile | 1 week | TeX Live integration |
| 4. PDF | 1 week | PDF.js preview pane |
| 5. Templates | 1 week | Template library (6+ templates) |
| 6. Inline | 1 week | Enhanced markdown+LaTeX |
| **Total** | **7 weeks** | Scribe v2.0 |

**Key Features:**
- Full `.tex` file editing with syntax highlighting
- Live PDF preview via PDF.js (~2MB)
- TeX Live compilation (pdflatex/xelatex)
- SyncTeX support (click PDF â†’ jump to source)
- Template library (article, beamer, thesis, etc.)
- EditorFactory pattern for format-based routing

**Architecture Changes:**
- Database: `file_format` column (md/tex/qmd)
- New Components: LaTeXEditor, PDFViewer, TemplateGallery
- New Backend: `src-tauri/src/latex.rs`

**ADHD Considerations:**
- Clear mode separation (markdown stays simple)
- Progressive disclosure (LaTeX mode only when chosen)
- No forced decisions (existing notes unaffected)

---

### Sprint 30 Phase 2: WikiLink Navigation & Editor Polish - COMPLETE âœ…

**v1.14.0 Released** âœ… (2026-01-07)

**WikiLink Navigation Improvements:**
- [x] Single-click navigation in Live/Reading modes (was double-click)
- [x] Cmd+Click navigation in Source mode for WikiLinks
- [x] Mode preservation when navigating via backlinks panel
- [x] Cursor indicator shows pointer when Cmd is held
- [x] Fixed `ignoreEvent()` to prevent cursor from moving into widget

**Live Preview Polish (Sprint 32):**
- [x] Display math spacing fixes
- [x] Theme-aware autocomplete styling
- [x] Syntax highlighting improvements for Source mode
- [x] Hidden WikiLink brackets in Live Preview mode

**Testing:**
- [x] 30 WikiLink navigation E2E tests (WLN-01 to WLN-30)
- [x] 1984 total tests passing
- [x] TypeScript: 0 errors
- [x] Build: Successful

**Bug Fixes:**
- [x] Window dragging functionality restored
- [x] Sidebar no longer overlays editor header drag region
- [x] List type properties now correctly use arrays
- [x] Timer value no longer draggable

**Release:**
- [x] PR #30 merged (dev â†’ main)
- [x] Git tag v1.14.0 created
- [x] GitHub release with DMG artifacts

---

### Sprint 30: Browser Mode Polish - Phase 1 COMPLETE âœ…

**v1.12.0 Released** âœ… (2026-01-02)

**Phase 1: Browser Mode Indexing Fix** âœ…
- [x] Fixed critical wiki link indexing bug in browser mode
- [x] Fixed tag indexing bug in browser mode
- [x] Backlinks panel fully functional in browser mode
- [x] Tag filtering fully functional in browser mode
- [x] Added batch reindexing utility for existing notes
- [x] 23 comprehensive unit tests (all passing)
- [x] Universal binary support (Apple Silicon + Intel)

**Testing:**
- [x] 930 unit tests passing (21 new component tests from Sprint 29)
- [x] 48 E2E tests base + improvements in progress:
  - [x] Window dragging: 10/10 passing
  - [x] Syntax highlighting: 9/15 passing (improved from 8/15)
  - [x] WikiLink rendering: Infrastructure ready, content clearing helper added
  - [x] Browser backlinks: 1/8 passing, 7 skipped with TODO
- [x] TypeScript: 0 errors
- [x] Production code verified working

**Release Process:**
- [x] PR #25 merged (feat/browser-mode-polish â†’ dev)
- [x] PR #26 merged (dev â†’ main)
- [x] Git tag v1.12.0 created and pushed
- [x] GitHub release published with DMG artifacts
- [x] Homebrew formula updated manually (scribe v1.12.0)
- [x] Installation tested via `brew install data-wise/tap/scribe`

**Documentation:**
- [x] Complete git workflow guide (docs/GIT-WORKFLOW.md)
- [x] Sprint 30 phase 1 summary (docs/planning/)
- [x] E2E test bug report documented (BUG-REPORT-E2E-TITLE-MISMATCH.md)
- [x] CHANGELOG.md updated
- [x] Planning INDEX.md updated

**Next Steps (Deferred):**
- [ ] Phase 1.5: Fix remaining 7 E2E tests (~30 min)
- [ ] Phase 2: PWA improvements (service worker, offline indicators)
- [ ] Phase 3: Documentation updates (browser mode guide, README)

**Sprint 25: Plan B UI Redesign + v1.2.1 Release** âœ… Complete (2025-12-30)

### Sprint 25: Plan B UI - Obsidian Style + Gradient Tabs
- [x] **Phase 1: Editor Tabs** âœ… Complete
  - [x] EditorTabs component with gradient accent (Style 5)
  - [x] Tab state management in useAppViewStore
  - [x] localStorage persistence for tabs
  - [x] Mission Control pinned as first tab
  - [x] Keyboard shortcuts (âŒ˜1-9 switch, âŒ˜W close)
  - [x] Middle-click to close tabs
- [x] **Phase 1.5: Project Note Display** âœ… Complete
  - [x] Remove redundant Recent Notes from sidebar
  - [x] Add expandable note tiles to Card Mode (Option B)
  - [x] Accordion-style expansion (one project at a time)
  - [x] Up to 6 recent notes per project
  - [x] Empty state with "Create first note" CTA
- [x] **Phase 5: Right Sidebar + Test Cleanup** âœ… Complete
  - [x] Icon-only collapsed mode for right sidebar
  - [x] Keyboard shortcuts for right sidebar tabs (âŒ˜[ / âŒ˜])
  - [x] Fix source file TypeScript errors (8 files)
  - [x] Fix test file TypeScript errors (59â†’0, 13 files)
  - [x] Create testUtils.ts mock factories
  - [x] **666 tests passing, 0 TypeScript errors**
- [x] **Phase 6: Playwright E2E Test Suite** âœ… Complete
  - [x] Playwright infrastructure (config, fixtures, page objects)
  - [x] 14 spec files covering all UI features
  - [x] 129 E2E tests passing across:
    - Smoke tests (4), Navigation (8), Tabs (13)
    - Editor (12), Left Sidebar (14), Right Sidebar (10)
    - Keyboard Shortcuts (15), Modals (10), Mission Control (8)
    - Projects (8), Notes (10), Focus Mode (5), Themes (6)
    - Mission Sidebar (6)
    - Tab Drag Reorder (3 new tests)
  - [x] data-testid attributes added to key components
  - [x] IndexedDB isolation per test context
  - [x] **795 total tests (666 unit + 129 E2E)**
- [x] **v1.2.1 Release** âœ… Complete (2025-12-30)
  - [x] Toast notifications (success/error feedback)
  - [x] Demo data seeding for Tauri (Migration 007)
  - [x] Unified seed data between browser/Tauri
  - [x] 47 new E2E tests (25 feature + 22 edge case/stress)
  - [x] WebDriver research documented
  - [x] Git workflow documented (protected main + worktrees)
  - [x] **1,041 total tests (759 unit + 282 E2E)**

**Design Document:** `SCHEMATIC-LEFT-SIDEBAR-REDESIGN.md`

---

### Sprint 26: Activity Bar Polish + Bug Fixes (Complete âœ…)

**High Priority (P1):**
- [x] Activity Bar badges âœ… - IconBarMode shows note count per project
- [x] Browser mode indicator âœ… - HybridEditor shows "Browser Mode" badge
- [x] Wiki link backlink tracking in browser mode âœ… - browser-api.ts getBacklinks

**Medium Priority (P2):**
- [x] Keyboard shortcut for right sidebar collapse (âŒ˜â‡§]) âœ…
- [x] Editor tabs persistence across restarts âœ… - useAppViewStore saveTabs
- [x] âŒ˜â‡§T reopen closed tab âœ… - reopenLastClosedTab + closedTabsHistory

**Bug Fixes (P1):**
- [x] Tauri API serialization âœ… - prepareNoteForTauri/parseNoteFromTauri for properties field
- [x] Daily note Today button âœ… - Added openNoteTab() call to display note in editor
- [x] Error toast persistence âœ… - Errors persist until dismissed with Copy/OK buttons
- [x] create_note project_id âœ… - Added missing field to CreateNoteInput struct

**Lower Priority (P3):**
- [ ] Phase 2: Vault Sidebar (Obsidian-style file tree)
- [ ] Phase 3: Status Bar (VS Code-style bottom bar)
- [x] Playwright E2E tests âœ… (282 tests)

---

### Sprint 29: Callouts & Editor Polish - COMPLETE âœ…

**v1.11.0 Released** âœ… (2026-01-01)

**Phase 1: Callout Support** âœ…
- [x] Obsidian-style callouts in all editor modes
- [x] 11 callout types with icons and colors (note, info, tip, warning, danger, etc.)
- [x] Live mode: Type-specific colored backgrounds/borders
- [x] Reading mode: Full callout boxes with icons and titles
- [x] Demo note "Callout Types" added to seed data

**Phase 2: Editor Polish** âœ…
- [x] Strikethrough rendering in Live mode (`~~text~~`)
- [x] 36 new E2E tests for editor modes (EDM-01 to EDM-36)
- [x] Clean up working directory (archived explorations)

**Testing:**
- [x] 930 unit tests passing
- [x] 48 E2E tests passing
- [x] TypeScript: 0 errors

**Future (Sprint 30):** Browser Mode Polish
- [ ] Wiki link backlink tracking in browser
- [ ] PWA improvements
- [ ] Documentation updates

---

### Sprint 28: Live Editor Enhancements

**v1.10.0 Released** âœ… (2026-01-01)

**Phase 1: Live Preview with CodeMirror 6 - Complete âœ…**
- [x] CodeMirror 6 integration for Live Preview mode
- [x] Obsidian-style live preview (hide syntax when cursor elsewhere)
- [x] KaTeX math rendering (inline `$...$` and display `$$...$$`)
- [x] Three editor modes with keyboard shortcuts:
  - [x] Source mode (âŒ˜1): Plain textarea
  - [x] Live Preview mode (âŒ˜2): CodeMirror with hidden syntax
  - [x] Reading mode (âŒ˜3): Fully rendered ReactMarkdown
  - [x] âŒ˜E cycles between modes
- [x] Bug fixes:
  - [x] Controlled component race condition (no more lost characters)
  - [x] New note tabs opening properly
  - [x] PWA build with increased workbox cache size (3MB)
- [x] Dependencies:
  - [x] Added: @codemirror/lang-markdown, state, view, language-data
  - [x] Added: @uiw/react-codemirror (React wrapper)
  - [x] Added: katex + @types/katex (math rendering)
  - [x] Removed: 8 unused Milkdown packages (-64 packages total)
- [x] Testing:
  - [x] 930/930 unit tests passing (34 test files, Vitest)
  - [x] 12/12 E2E editor tests passing (Playwright)
  - [x] TypeScript: 0 errors
  - [x] Build: Successful (Vite 5.48s)
- [x] Release artifacts:
  - [x] DMGs built: Scribe_1.10.0_aarch64.dmg + Scribe_1.10.0_x64.dmg
  - [x] GitHub release published
  - [x] Homebrew tap updated (data-wise/tap/scribe v1.10.0)

**Commits:**
- `b8848f0` - Live editor implementation (PR #21)
- `cad5ef2` - Merge to main
- `98f2086` - PWA cache size fix (PR #23)
- `48b9940` - Tauri version update to 1.10.0

**Documentation:**
- `RELEASE-SUMMARY-v1.10.0.md` - Complete release documentation
- `RELEASE-COMPLETE-v1.10.0.md` - Release completion summary
- `CHANGELOG.md` - Updated with v1.10.0 entry
- GitHub Pages auto-deployed

---

### Sprint 27: Backend Foundation + AI Integration

**v1.7.0 Released** âœ… (2025-12-31)

**Phase 1: Backend Foundation - Complete âœ…**
- [x] Chat History Persistence (Migration 009)
  - [x] `chat_sessions` and `chat_messages` tables
  - [x] CASCADE foreign keys for automatic cleanup
  - [x] Auto-save/load conversations per note
  - [x] Session switching on note navigation
  - [x] Browser mode support (IndexedDB)
- [x] Quick Actions (5 one-click AI prompts)
  - [x] âœ¨ Improve - Polish clarity and flow
  - [x] ðŸ“ Expand - Add depth and examples
  - [x] ðŸ“‹ Summarize - Create concise summaries
  - [x] ðŸ’¡ Explain - Clarify complex concepts
  - [x] ðŸ” Research - Generate research questions
  - [x] Auto-includes full note context
- [x] @ References (autocomplete note inclusion)
  - [x] Fuzzy search menu with `@` trigger
  - [x] Badge display for included notes
  - [x] Remove references functionality
- [x] Comprehensive Testing (911 tests)
  - [x] 12 backend tests (Rust: chat sessions CRUD)
  - [x] 38 frontend tests (Vitest: Quick Actions, @ References)
  - [x] 67 E2E tests (Playwright: Claude features, Quick Chat)
  - [x] 794 existing tests maintained
- [x] Complete Documentation (5,169 lines)
  - [x] Chat persistence guide (523 lines)
  - [x] Quick Actions reference card (390 lines)
  - [x] 7 comprehensive tutorials (3,256 lines)
    - [x] Terminal Integration (362 lines)
    - [x] Project System (507 lines)
    - [x] Daily Notes (463 lines)
    - [x] Mission Control (428 lines)
    - [x] Command Palette (431 lines)
    - [x] Backlinks (532 lines)
    - [x] Browser Mode (533 lines)
  - [x] Tutorial index with learning paths (148 lines)
  - [x] CHANGELOG updated
  - [x] README updated
  - [x] mkdocs.yml navigation updated
- [x] CI/CD Fixed
  - [x] Release workflow bug fix (dtolnay/rust-toolchain)
  - [x] Automated site deployment working
  - [x] Automated builds enabled for future releases

**Phase 2: Frontend Polish (P2 - COMPLETE)** âœ…

**v1.9.0 Released** âœ… (2026-01-01)

**Priority 1: Settings Enhancement (ADHD-Optimized UI)** âœ… SHIPPED

**Branch:** `feat/settings-enhancement`
**Worktree:** `/Users/dt/.git-worktrees/scribe/settings`
**Spec:** `docs/specs/SPEC-settings-enhancement-2025-12-31.md`
**Brainstorm:** `BRAINSTORM-settings-enhancement-2025-12-31.md`

**Phase 1: Foundation - COMPLETE âœ… (2025-12-31)**
- [x] Zustand store for settings state (useSettingsStore.ts - 427 lines)
- [x] Settings schema with 5 categories (settingsSchema.ts - 426 lines)
- [x] SettingsModal with tabs + search UI (200 lines)
- [x] SearchResults component (58 lines)
- [x] Fuzzy search with fuse.js (search across labels, descriptions, breadcrumbs)
- [x] âŒ˜, keyboard shortcut to open settings
- [x] Badge system for new features (AI category shows "3" for v1.7.0)
- [x] Quick Actions management (5 default + up to 5 custom)
- [x] Export/import functionality
- [x] Dependencies installed (@dnd-kit/core, @dnd-kit/sortable, fuse.js)
**Commit:** `187ecb7` - feat: Settings Enhancement Phase 1 - Foundation

**Phase 2: Quick Wins - COMPLETE âœ… (2025-12-31)**
- [x] Individual setting controls (7 types: toggle, select, text, number, color, gallery, keymap)
  - [x] SettingControl.tsx (418 lines) - Universal control component
  - [x] 31 unit tests (100% passing)
- [x] Quick Actions customization UI
  - [x] QuickActionsSettings.tsx (486 lines)
  - [x] Drag-to-reorder Quick Actions (@dnd-kit)
  - [x] Visibility toggles per action
  - [x] Edit prompts (5 default + 5 custom max)
  - [x] Keyboard shortcuts displayed (âŒ˜âŒ¥1-9)
  - [x] Model selection (Claude vs Gemini per action)
  - [x] Add Custom modal with validation
  - [x] Delete custom actions
  - [x] Display options (sidebar/context menu)
  - [x] 20 unit tests (100% passing)
- [x] Project template picker (5 presets: Research+, Teaching+, Dev+, Writing+, Minimal)
  - [x] ProjectTemplates.tsx (269 lines)
  - [x] Template cards with icon, description, preview
  - [x] Apply with confirmation
  - [x] Expandable details section
  - [x] 25 unit tests (100% passing)
- [x] Theme gallery view (3-column grid with visual previews)
  - [x] ThemeGallery.tsx (251 lines)
  - [x] 8 themes (3 favorites, 2 dark, 3 light)
  - [x] Visual color previews with mini editor lines
  - [x] Star icons for favorites
  - [x] Selected state (blue border + checkmark)
  - [x] 15 unit tests (100% passing)
- [x] Contextual settings hints (ContextualHint.tsx - 90 lines)
- [x] Test suite (91 unit tests, all passing)
- [x] Visual testing in Chrome browser (all components verified)
**Commits:**
- `187ecb7` - feat: Settings Enhancement Phase 1 - Foundation
- `1e5e085` - test: Fix all failing unit tests - 930/930 passing

**Phase 3: Polish & Production Ready - COMPLETE âœ… (2025-12-31)**
- [x] UI Animations & Transitions
  - [x] Tailwind config: 7 new animations (fade-out, slide-down, scale-in, shimmer, pulse-soft, success-bounce)
  - [x] Tab switching: Smooth fade-in transitions between categories
  - [x] Theme cards: Scale + shadow hover effects (hover:scale-105)
  - [x] Template apply: Success bounce animation (animate-success-bounce)
  - [x] Search results: Fade-in animation
  - [x] Apply buttons: Scale hover effect
- [x] Performance Optimizations
  - [x] Search debounce (300ms delay after typing stops)
  - [x] Prevents search from running on every keystroke
- [x] Accessibility (WCAG 2.1 AA)
  - [x] Modal: role=dialog, aria-modal, aria-labelledby
  - [x] Search: role=searchbox, aria-label
  - [x] Tabs: role=tab, aria-selected, aria-controls
  - [x] Tab panel: role=tabpanel with matching id
  - [x] Buttons: Descriptive aria-label attributes
  - [x] Icons: aria-hidden=true (decorative)
  - [x] Screen reader improvements
- [x] E2E Test Coverage
  - [x] Theme gallery tests (9 tests): rendering, selection, persistence, hover, favorites, keyboard nav
  - [x] Project templates tests (12 tests): rendering, apply workflow, confirmation, details, keyboard nav
  - [x] 21 new E2E tests (103 total, was 82)
**Commits:**
- `a0bbec1` - feat(settings): Add UI animations and hover effects
- `7158f0b` - feat(settings): Add search debounce and ARIA labels
- `c240b71` - test(settings): Add E2E tests for Phase 2 components

**Post-Release (2026-01-01):**
- [x] **v1.9.0 GitHub Release Debugging** âœ…
  - [x] Fixed release workflow (tauri-action â†’ manual build)
  - [x] Built DMG artifacts for both architectures (x64 + aarch64)
  - [x] Uploaded to GitHub release v1.9.0
  - [x] Updated Homebrew formulas with correct SHA256
  - [x] Tested installation via `brew install scribe-dev` âœ…
  - [x] Updated README.md (version badges, feature list)
  - [x] Updated mkdocs.yml (Settings tutorial navigation)
  - [x] **Release fully working - users can install v1.9.0!**

**Priority 2: Additional P2 Items (Backlog)**
- [ ] Browser mode indicator in UI
- [ ] Wiki link backlink tracking in browser
- [ ] Chat session management UI

**Phase 3: Advanced Features (P3 - Backlog)**
- [ ] Ambient AI (âŒ˜K everywhere, inline suggestions)
- [ ] Vault sidebar (Obsidian file tree)
- [ ] Status bar enhancements
- [ ] Property type validation in Rust
- [ ] Add properties to search index

---

### Sprint 24: Three-State Collapsible Sidebar âœ… (2025-12-27)
- [x] Icon mode (48px) - status dots only
- [x] Compact mode (240px) - project list with stats
- [x] Card mode (320px+) - full project cards
- [x] Resize handle with snap points
- [x] âŒ˜0 keyboard shortcut to cycle modes
- [x] State persistence (localStorage + Zustand)
- [x] Project switching with toggle behavior
- [x] Active project indicator (all modes)
- [x] Progress bars in sidebar
- [x] Rich tooltips on icon hover (name, status, note count)
- [x] Recent Notes filtered by selected project

### Sprint 23: Mission Control & Native Menu âœ…
- [x] New Project button in QuickActions (âŒ˜â‡§P)
- [x] Improved empty state with Create Project CTA
- [x] Native macOS menu bar (File/Edit/View/Window/Help)
- [x] Menu events wired to frontend actions
- [x] RecentNotes component (5 most recent)
- [x] Project stats (note count, word count)
- [x] Total stats in Mission Control header
- [x] Mission Control button in Ribbon (navigation fix)

### Sprint 22: Editor Modes & Custom CSS âœ…
- [x] Three-mode editor toggle (Source / Live Preview / Reading)
- [x] Keyboard shortcuts: âŒ˜1, âŒ˜2, âŒ˜3, âŒ˜E (cycle)
- [x] Custom CSS support in Settings > Appearance
- [x] EditorMode type in preferences.ts
- [x] CSS injection in App.tsx
- [x] Escape exits Reading mode

### Sprint 20: Scribe CLI âœ…
- [x] `scribe.zsh` CLI script (607 lines)
- [x] Commands: new, daily, search, capture, list, open, edit, tags, folders, stats
- [x] FTS5 full-text search integration
- [x] Aliases: sd, sc, ss, sl, sn
- [x] Tab completion for commands/folders
- [x] Auto-sourced in `.zshrc`

### Sprint 19: Note Search âœ…
- [x] SearchPanel.tsx component
- [x] âŒ˜F keyboard shortcut
- [x] Scope selector (All Notes / Current Project)
- [x] Debounced 150ms real-time search
- [x] Keyboard navigation (â†‘â†“ Navigate, â†µ Open, Esc Close)
- [x] Highlighted search matches with snippets

### Sprint 18: Project System âœ…
- [x] Database schema (migration_004: projects table, note.project_id)
- [x] Rust CRUD commands (create/get/list/update/delete/assign)
- [x] Zustand store with localStorage persistence
- [x] ProjectSwitcher dropdown component
- [x] CreateProjectModal component
- [x] Project-scoped note loading in App.tsx
- [x] 5 project types: research, teaching, r-package, r-dev, generic

### Sprint 17: UI Polish + ADHD Enhancements âœ…
- [x] Celebration micro-interactions (pulse at milestones)
- [x] Enhanced status bar (session timer, word delta, streak)
- [x] Keyboard shortcut cheatsheet (âŒ˜?)
- [x] CSS animations for celebrations (respects reduced-motion)
- [x] Session tracking (time since first keystroke)
- [x] Better mode toggle (pill-style)

**Sprint 16: Tags Panel Core Features** âœ… Complete
- [x] Orphan tag detection (scans notes for unregistered `#tags`)
- [x] Unregistered Tags section with warning styling
- [x] Register single/all tags buttons
- [x] Right-click context menu (Rename/Delete)
- [x] `tags` added to DEFAULT_NOTE_PROPERTIES (YAML key)

**Sprint 15: Tags Panel Quick Wins** âœ… Complete
- [x] Search/filter bar with real-time filtering
- [x] Recent tags section (tracks last 8, shows top 5)
- [x] Compact mode toggle (reduces padding/fonts)

**Sprint 14: Knowledge Graph & Templates** âœ… Complete
- [x] Knowledge Graph visualization (D3 force-directed)
- [x] Daily Notes templates (5 built-in + custom)
- [x] Markdown export with frontmatter
- [x] Tag hierarchy (path notation: `research/statistics`)
- [x] Backlinks panel improvements

**Sprint 11: Academic Features** âœ… Complete
- [x] 10 built-in themes (5 dark, 5 light)
- [x] Auto-theme by time of day
- [x] Theme colors apply to editor area
- [x] 14 ADHD-friendly font recommendations

**Sprint 10: Global Hotkey + Commands** âœ… Complete (2024-12-25)
- [x] Global hotkey âŒ˜â‡§N opens app from anywhere
- [x] Command palette âŒ˜K with 6 quick actions
- [x] Autocomplete positioning follows cursor (fixed)
- [x] Accessibility improvements (DialogTitle, aria-labels)
- [x] Comprehensive test suite: **300 tests passing**
- [x] Integration tests added (31 new tests)

**Test Coverage:**
| Test File | Tests |
|-----------|-------|
| Themes.test.ts | 101 |
| Academic.test.ts | 67 |
| Validation.test.ts | 54 |
| Tags.test.tsx | 52 |
| HybridEditor.test.tsx | 37 |
| BlockNoteEditor.test.tsx | 35 |
| Autocomplete.test.tsx | 34 |
| Integration.test.tsx | 32 |
| AcademicComponents.test.tsx | 25 |
| CommandPalette.test.tsx | 24 |
| Components.test.tsx | 16 |
| WikiLinks.test.tsx | 16 (7 skipped) |
| Debug.test.ts | 16 |
| NotesStore.test.tsx | 13 |

---

## Sprint Progress

| Phase | Sprint | Focus | Status |
|-------|--------|-------|--------|
| **1** | 8 | Editor Foundation | âœ… 100% |
| 1 | 9 | Editor Enhancement | âœ… 100% |
| 1 | 10 | Hotkey + Commands | âœ… 100% |
| 1 | 10.5 | Theme & Font System | âœ… 100% |
| **2** | 11 | Academic Features | âœ… 100% |
| 2 | 12 | UI Polish & Micro-interactions | âœ… 100% |
| **3** | 14 | Knowledge Graph & Templates | âœ… 100% |
| **4** | 15 | Tags Panel Quick Wins | âœ… 100% |
| 4 | 16 | Tags Panel Core Features | âœ… 100% |
| **5** | 17 | UI Polish + ADHD Enhancements | âœ… 100% |
| **v1.1** | 18 | Project System | âœ… 100% |
| v1.1 | 19 | Note Search (âŒ˜F) | âœ… 100% |
| v1.1 | 20 | Scribe CLI | âœ… 100% |
| **v1.3** | 22 | Editor Modes + Custom CSS | âœ… 100% |
| **v1.4** | 23 | Mission Control + Native Menu | âœ… 100% |
| **v1.5** | 24 | Three-State Sidebar | âœ… 100% |
| **v1.6** | 25 | Plan B UI Redesign | âœ… 50% |

**Total: v1.2.1 released (1,041 tests: 759 unit + 282 E2E)**

---

## Future Plans (Backlog)

| Sprint | Focus | Priority | Status |
|--------|-------|----------|--------|
| 27 | Sidebar Consolidation + AI | P1 | ðŸ“‹ Planned |
| TBD | SwiftUI Native Port | P3 | ðŸ“‹ Researched |

---

### v2.0 LaTeX Editor Mode (Major Feature)

**Status:** ðŸ“‹ Planning Complete
**Branch:** `feat/latex-editor-v2`
**Worktree:** `~/.git-worktrees/scribe/latex-v2`
**Spec:** `docs/planning/PLAN-v2-latex-editor.md`

**Goal:** Full Overleaf-like LaTeX editing experience

| Phase | Duration | Deliverable |
|-------|----------|-------------|
| 1. Foundation | 2 weeks | Multi-format architecture (database + API) |
| 2. Editor | 1 week | LaTeXEditor component |
| 3. Compile | 1 week | TeX Live integration |
| 4. PDF | 1 week | PDF.js preview pane |
| 5. Templates | 1 week | Template library (6+ templates) |
| 6. Inline | 1 week | Enhanced markdown+LaTeX |
| **Total** | **7 weeks** | Scribe v2.0 |

**Key Features:**
- Full `.tex` document editing with syntax highlighting
- Live PDF preview (split view)
- TeX Live compilation (pdflatex/xelatex)
- Templates library (article, thesis, beamer, CV)
- Symbol palette (âŒ˜âŒ¥S)
- SyncTeX support (click PDF â†’ jump to source)

**Architecture Changes:**
- Database: Add `file_format` column to notes table
- EditorFactory pattern for format-based routing
- New components: LaTeXEditor, PDFViewer, TemplateGallery, SymbolPalette
- Rust: `latex.rs` for TeX Live detection and compilation

**Dependencies:**
- `pdfjs-dist` (~2MB) for PDF rendering
- `@codemirror/legacy-modes` for LaTeX syntax

**ADHD Considerations:**
- Clear mode separation (markdown default, LaTeX opt-in)
- Progressive disclosure (no forced decisions)
- Visual distinction between file types

---

### v2 Deferred Features

| Feature | Status | Notes |
|---------|--------|-------|
| **LaTeX Editor Mode** | ðŸ“‹ Planned | See v2.0 section above |
| Terminal PTY Shell | UI âœ…, Backend â³ | Rust `terminal.rs` with PTY support |
| Actual AI Calls | Planned | Claude/Gemini CLI integration via Tauri |
| Ambient AI (âŒ˜K) | Planned | Inline suggestions, ghost text |
| Graph View Enhancements | Planned | Advanced filtering, clustering |

**Terminal v2:** Full PTY shell requires `spawn_shell`, `write_to_shell`, `kill_shell` Rust commands.
Currently shows demo mode with basic commands (help, echo, clear, date, whoami).

**SwiftUI Port:** Parallel development branch for native macOS experience.
See: `BRAINSTORM-TAURI-TO-SWIFTUI.md`, worktree at `~/.git-worktrees/scribe/swiftui-native`

---

## Completed Sprints

| Sprint | Focus | Tests |
|--------|-------|-------|
| 1-5 | Foundation (Tauri, SQLite, Editor, PARA, Search) | âœ… |
| 6 | Wiki Links & Backlinks | âœ… |
| 7 | Tags System | 52 |
| 8 | Editor Foundation | âœ… |
| 9 | Editor Enhancement | 125 |
| 10 | Hotkey + Commands + Tests | 300 |
| 10.5 | Theme & Font System | 407 |
| 11 | Academic Features | 487 |
| 12 | UI Polish & Micro-interactions | 483 |
| 14 | Knowledge Graph & Templates | 483 |
| 15 | Tags Panel Quick Wins | 483 |
| 16 | Tags Panel Core Features | 483 |
| 17 | UI Polish + ADHD Enhancements | 483 |
| 18 | Project System | 483 |
| 19 | Note Search (âŒ˜F) | 483 |
| 20 | Scribe CLI | 483 |
| 22 | Editor Modes + Custom CSS | 483 |
| 23 | Mission Control + Native Menu | 483 |
| 24 | Three-State Collapsible Sidebar | 518 |
| 25 | Plan B UI (Phase 1+5+6) | 795 (666 unit + 129 E2E) |

---

## Key Features

**Three-State Sidebar (v1.5):**
- Icon mode (48px) - minimal, status dots only
- Compact mode (240px) - project list with stats
- Card mode (320px+) - full project cards with details
- âŒ˜0 cycles through modes
- Resize handle with snap points
- Project switching with toggle behavior
- Recent Notes filtered by selected project

**Mission Control (v1.4):**
- Dashboard with project cards and stats
- Recent Notes section (5 most recent)
- New Project button (âŒ˜â‡§P)
- Project stats (note count, word count)
- Total stats in header

**Native macOS Menu (v1.4):**
- Complete menu bar: File, Edit, View, Window, Help
- All keyboard shortcuts visible in menus
- Menu events trigger frontend actions
- Documentation and GitHub links

**Editor Modes (v1.3):**
- Three-mode toggle: Source / Live Preview / Reading
- Keyboard shortcuts: âŒ˜1, âŒ˜2, âŒ˜3, âŒ˜E (cycle)
- Escape exits Reading mode

**Custom CSS (v1.3):**
- Settings > Appearance > Custom CSS
- Enable/disable toggle
- Live CSS injection
- Reset to default option

**Editor:**
- HybridEditor++ (contenteditable + markdown preview)
- Live wiki-link `[[...]]` highlighting with cursor-following autocomplete
- Live tag `#tag` highlighting with autocomplete
- Word count, mode toggle (âŒ˜E)
- Focus mode (âŒ˜â‡§F)

**Project System (v1.1):**
- 5 project types: research, teaching, r-package, r-dev, generic
- Project switcher dropdown in sidebar
- Project-scoped note filtering
- Zustand store with localStorage persistence
- Database migration for projects table

**Note Search (v1.1):**
- SearchPanel with âŒ˜F shortcut
- Scope selector (All Notes / Current Project)
- Debounced 150ms real-time search
- Keyboard navigation (â†‘â†“/â†µ/Esc)
- Highlighted matches with snippets

**Scribe CLI (v1.1):**
- Terminal-based note access via `scribe` command
- Commands: new, daily, search, capture, list, open, edit, tags, folders, stats
- Aliases: sd, sc, ss, sl, sn
- FTS5 full-text search
- Tab completion

**Themes & Fonts:**
- 10 built-in ADHD-friendly themes (5 dark, 5 light)
- Theme colors apply to entire editor (including editor area)
- Auto-theme by time of day (light 6am-6pm)
- Custom theme creator with live preview
- Import/export themes (JSON, Base16 YAML, URL)
- Theme keyboard shortcuts (Cmd+Alt+0-9)
- 14 recommended ADHD-friendly fonts
- One-click Homebrew font installation
- Font settings (family, size, line height)

**Commands:**
- Global hotkey âŒ˜â‡§N
- Command palette âŒ˜K
- Quick actions: Create, Daily, Focus, Sync, Claude, Gemini
- Keyboard shortcuts: âŒ˜N, âŒ˜D, âŒ˜B, âŒ˜â‡§B, âŒ˜F, âŒ˜?

**Academic:**
- MathJax 3 for LaTeX rendering ($...$ inline, $$...$$ display)
- Citation autocomplete (@trigger)
- BibTeX/Zotero integration
- Export to PDF, Word, LaTeX, HTML, Markdown (via Pandoc)
- 5 citation styles (APA, Chicago, MLA, IEEE, Harvard)

**Accessibility:**
- Screen reader support (DialogTitle, DialogDescription)
- Aria labels on interactive elements
- Keyboard navigation

---

## Stack

| Layer | Tech |
|-------|------|
| Shell | Tauri 2 |
| UI | React 18 |
| Editor | HybridEditor++ |
| Styling | Tailwind |
| State | Zustand |
| Database | SQLite (rusqlite) |
| AI | Claude/Gemini CLI |
| Unit Testing | Vitest + Testing Library |
| E2E Testing | Playwright |

---

## Files

- [PROJECT-DEFINITION.md](PROJECT-DEFINITION.md) - Scope & roadmap
- [CHANGELOG.md](CHANGELOG.md) - Version history
- [TESTS_SUMMARY.md](TESTS_SUMMARY.md) - Test coverage
- [CLAUDE.md](CLAUDE.md) - AI guidance
- [docs/planning/](docs/planning/) - Sprint plans
## last_active: 2025-12-30
## streak: 3
