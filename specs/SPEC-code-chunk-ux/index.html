
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="ADHD-friendly distraction-free writer with projects, academic features, and CLI-based AI">
      
      
        <meta name="author" content="Data-Wise">
      
      
        <link rel="canonical" href="https://data-wise.github.io/scribe/specs/SPEC-code-chunk-ux/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>UX Design Spec: Code Chunk Visual Treatment - Scribe</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ux-design-spec-code-chunk-visual-treatment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Scribe" class="md-header__button md-logo" aria-label="Scribe" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Scribe
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              UX Design Spec: Code Chunk Visual Treatment
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to high contrast"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to high contrast" for="__palette_3" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to auto mode"  type="radio" name="__palette" id="__palette_3">
    
      <label class="md-header__button md-icon" title="Switch to auto mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c-2.21 0-4.21-.9-5.66-2.34L17.66 6.34A8.01 8.01 0 0 1 20 12a8 8 0 0 1-8 8M6 8h2V6h1.5v2h2v1.5h-2v2H8v-2H6M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 14h5v-1.5h-5z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Data-Wise/scribe" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Data-Wise/scribe
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../user/QUICKSTART/" class="md-tabs__link">
        
  
  
    
  
  Quick Start

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../user/GETTING-STARTED/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../installation/install/" class="md-tabs__link">
          
  
  
  Installation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guide/features/" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/REFCARD-SETTINGS/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/architecture/" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../planning/INDEX/" class="md-tabs__link">
          
  
  
  Planning

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../archive/completed/MISSION-CONTROL-WALKTHROUGH/" class="md-tabs__link">
          
  
  
  Guides

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Scribe" class="md-nav__button md-logo" aria-label="Scribe" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Scribe
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Data-Wise/scribe" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Data-Wise/scribe
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/QUICKSTART/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user/GETTING-STARTED/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Installation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../RELEASE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/themes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Themes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/editor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Editor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/chat-persistence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chat Persistence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/shortcuts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Keyboard Shortcuts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings Enhancement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/terminal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Terminal Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/projects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/daily-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Daily Notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/mission-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mission Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/command-palette/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Palette
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/backlinks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backlinks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/browser-mode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Browser Mode
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/REFCARD-SETTINGS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/REFCARD-QUICK-ACTIONS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Actions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DUAL-MODE-ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dual-Mode Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../COMPONENTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Components
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TAURI-BROWSER-FEATURE-REVIEW/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tauri/Browser Feature Review
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../TAURI-WEBDRIVER-RESEARCH/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tauri WebDriver Research
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/PROJECT-DEFINITION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project Definition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/CHANGELOG/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/TESTS_SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/sprints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sprint Planning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Planning
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Planning
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../planning/INDEX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Planning Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../archive/completed/MISSION-CONTROL-WALKTHROUGH/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mission Control Walkthrough
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-problem-statement" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Problem Statement
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-current-state-before" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Current State (Before)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-proposed-design-after" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Proposed Design (After)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Proposed Design (After)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-anatomy-of-a-code-chunk" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Anatomy of a Code Chunk
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-color-recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Color Recommendations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Color Recommendations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-strategy-derive-from-theme-not-hardcode" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Strategy: Derive from Theme, Not Hardcode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-new-css-custom-properties" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 New CSS Custom Properties
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-per-theme-values-computed" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Per-Theme Values (Computed)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-simplified-implementation-theme-agnostic" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4 Simplified Implementation (Theme-Agnostic)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-contrast-verification" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.5 Contrast Verification
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-typography" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Typography
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Typography">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-font-size-relationship" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Font Size Relationship
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-font-family" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Font Family
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-line-height" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Line Height
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-spacing-and-boundaries" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Spacing and Boundaries
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Spacing and Boundaries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-chunk-margins" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Chunk Margins
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-left-border-accent-gutter" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Left Border (Accent Gutter)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-right-boundary" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Right Boundary
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-full-width-background" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.4 Full-Width Background
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-language-badge" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Language Badge
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Language Badge">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-appearance" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Appearance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-visibility-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Visibility Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-language-display-map" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Language Display Map
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-chunk-option-styling-lines" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Chunk Option Styling (#| lines)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Chunk Option Styling (#| lines)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-rationale" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Rationale
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-fence-line-treatment" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Fence Line Treatment
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Fence Line Treatment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-opening-fence-r" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1 Opening Fence (```{r})
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-closing-fence" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2 Closing Fence (```)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#93-future-consideration-collapsed-fence-display" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.3 Future Consideration: Collapsed Fence Display
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-interaction-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Interaction Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10. Interaction Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101-cursor-inside-chunk" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1 Cursor Inside Chunk
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102-hover-state" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2 Hover State
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#103-focus-indicator-keyboard-navigation" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3 Focus Indicator (Keyboard Navigation)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#104-selection-inside-chunks" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.4 Selection Inside Chunks
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-what-not-to-include" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. What NOT to Include
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-accessibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. Accessibility
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="12. Accessibility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-color-contrast" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.1 Color Contrast
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-not-relying-on-color-alone" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.2 Not Relying on Color Alone
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123-screen-reader-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.3 Screen Reader Considerations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#124-motion-and-animation" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.4 Motion and Animation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-implementation-approach" class="md-nav__link">
    <span class="md-ellipsis">
      
        13. Implementation Approach
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13. Implementation Approach">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131-phase-1-css-only-immediate" class="md-nav__link">
    <span class="md-ellipsis">
      
        13.1 Phase 1: CSS-Only (Immediate)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132-phase-2-viewplugin-decoration-follow-up" class="md-nav__link">
    <span class="md-ellipsis">
      
        13.2 Phase 2: ViewPlugin Decoration (Follow-up)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#133-phase-3-language-badge-widget-future" class="md-nav__link">
    <span class="md-ellipsis">
      
        13.3 Phase 3: Language Badge Widget (Future)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14-visual-summary-before-and-after" class="md-nav__link">
    <span class="md-ellipsis">
      
        14. Visual Summary: Before and After
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14. Visual Summary: Before and After">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#light-theme-sage-garden" class="md-nav__link">
    <span class="md-ellipsis">
      
        Light Theme (Sage Garden)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dark-theme-oxford-dark" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dark Theme (Oxford Dark)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#15-open-questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        15. Open Questions
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="ux-design-spec-code-chunk-visual-treatment">UX Design Spec: Code Chunk Visual Treatment</h1>
<p><strong>Date:</strong> 2026-02-24
<strong>Status:</strong> Draft
<strong>Scope:</strong> CSS + optional ViewPlugin decoration for code chunks in CodeMirror editor</p>
<hr />
<h2 id="1-problem-statement">1. Problem Statement</h2>
<p>Code chunks in Scribe are nearly invisible. The current <code>rgba(0,0,0,0.04)</code> background (4% opacity) fails to create meaningful visual separation between prose and code. For academics with ADHD, this lack of distinction causes:</p>
<ul>
<li><strong>Context-switching friction</strong> -- the eye cannot quickly locate "where am I, prose or code?"</li>
<li><strong>Lost place</strong> when scrolling through mixed Quarto documents</li>
<li><strong>Missed chunk boundaries</strong> leading to accidental edits in the wrong region</li>
</ul>
<p>The goal is not VS Code fidelity. It is calm, unmistakable distinction.</p>
<hr />
<h2 id="2-current-state-before">2. Current State (Before)</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>+------------------------------------------------------------------+
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>|                                                                    |
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>|  This is prose text in the document. The quick brown fox jumps     |
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>|  over the lazy dog. Here is some academic writing about methods.   |
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>|                                                                    |
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>|  ```{r}                                            &lt;- barely seen  |
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>| |#| label: fig-scatter                                             |
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>| |#| fig-cap: &quot;Relationship between X and Y&quot;                       |
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>| |library(ggplot2)                                                  |
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>| |ggplot(data, aes(x, y)) + geom_point()                           |
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>|  ```                                                               |
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>|                                                                    |
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>|  The results in @fig-scatter show a clear correlation between      |
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>|  the two variables, consistent with prior findings.                |
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>|                                                                    |
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>+------------------------------------------------------------------+
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>Legend:  | = thin 2px accent border (only visual cue)
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>        Background is rgba(0,0,0,0.04) -- essentially invisible
</code></pre></div>
<p><strong>Problems with current state:</strong>
- 4% opacity background is imperceptible on most light themes
- On dark themes, <code>rgba(255,255,255,0.04)</code> is equally invisible
- The thin left border alone is not enough to establish a region
- Fence lines (<code>```{r}</code>) look like regular text
- Chunk options (<code>#|</code>) are indistinguishable from comments in prose
- No top/bottom boundary makes chunks bleed into surrounding text</p>
<hr />
<h2 id="3-proposed-design-after">3. Proposed Design (After)</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>+------------------------------------------------------------------+
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>|                                                                    |
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>|  This is prose text in the document. The quick brown fox jumps     |
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>|  over the lazy dog. Here is some academic writing about methods.   |
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>|                                                                    |
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>|  .----------- r --------------------------------------------------.|
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>|  | ```{r}                                                         ||
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>|  | #| label: fig-scatter                          (dimmed, 85%)   ||
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>|  | #| fig-cap: &quot;Relationship between X and Y&quot;     (dimmed, 85%)   ||
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>|  | library(ggplot2)                                               ||
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>|  | ggplot(data, aes(x, y)) + geom_point()                        ||
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>|  | ```                                                            ||
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>|  &#39;----------------------------------------------------------------&#39;|
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>|                                                                    |
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>|  The results in @fig-scatter show a clear correlation between      |
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>|  the two variables, consistent with prior findings.                |
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>|                                                                    |
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>+------------------------------------------------------------------+
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>Legend:
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>  .---. = subtle rounded border (1px, semi-transparent)
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>    |   = left accent border (3px, theme accent at 40% opacity)
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>   r    = language badge (small, muted, top-right corner)
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>  Background = var(--code-chunk-bg), theme-derived, ~8-12% opacity
</code></pre></div>
<h3 id="31-anatomy-of-a-code-chunk">3.1 Anatomy of a Code Chunk</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>     language badge (optional, on hover or always -- see Section 7)
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>            |
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>  .---------v--- r -.
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>  | ```{r}           |   &lt;-- fence line: slightly darker bg, monospace
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>  | #| label: fig-1  |   &lt;-- chunk options: dimmed text, smaller font
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>  | #| echo: false   |
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>  |                   |   &lt;-- code body: monospace, standard code bg
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>  | x &lt;- rnorm(100)  |
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>  | plot(x)          |
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>  | ```              |   &lt;-- closing fence: matches opening style
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>  &#39;-------------------&#39;
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>       ^
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>       |
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>  left accent border (3px, accent color at 40%)
</code></pre></div>
<hr />
<h2 id="4-color-recommendations">4. Color Recommendations</h2>
<h3 id="41-strategy-derive-from-theme-not-hardcode">4.1 Strategy: Derive from Theme, Not Hardcode</h3>
<p>The current approach uses hardcoded <code>rgba(0,0,0,0.04)</code> and <code>rgba(255,255,255,0.04)</code>. This is too subtle and ignores the theme's actual background color. Instead, derive the code chunk background from <code>--nexus-bg-tertiary</code>, which every theme already defines as "the third-level surface."</p>
<h3 id="42-new-css-custom-properties">4.2 New CSS Custom Properties</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c">/* Add to applyTheme() output or compute in CSS */</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nt">--code-chunk-bg</span><span class="o">:</span><span class="w">        </span><span class="c">/* bgTertiary at ~50% opacity over bgPrimary */</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nt">--code-chunk-bg-fence</span><span class="o">:</span><span class="w">  </span><span class="c">/* bgTertiary at ~70% opacity over bgPrimary */</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="nt">--code-chunk-border</span><span class="o">:</span><span class="w">    </span><span class="c">/* accent at 30-40% opacity */</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="nt">--code-chunk-option</span><span class="o">:</span><span class="w">    </span><span class="c">/* textMuted at 80% */</span>
</code></pre></div>
<h3 id="43-per-theme-values-computed">4.3 Per-Theme Values (Computed)</h3>
<p>Using <code>bgTertiary</code> mixed toward <code>bgPrimary</code>:</p>
<table>
<thead>
<tr>
<th>Theme</th>
<th>Type</th>
<th>bgPrimary</th>
<th>bgTertiary</th>
<th>Recommended chunk bg</th>
</tr>
</thead>
<tbody>
<tr>
<td>Oxford Dark</td>
<td>dark</td>
<td>#0a0c10</td>
<td>#1a1f26</td>
<td>rgba(26,31,38, 0.55)</td>
</tr>
<tr>
<td>Forest Night</td>
<td>dark</td>
<td>#0d1210</td>
<td>#1c2922</td>
<td>rgba(28,41,34, 0.55)</td>
</tr>
<tr>
<td>Warm Cocoa</td>
<td>dark</td>
<td>#121010</td>
<td>#262220</td>
<td>rgba(38,34,32, 0.55)</td>
</tr>
<tr>
<td>Midnight Purple</td>
<td>dark</td>
<td>#0e0c12</td>
<td>#201c28</td>
<td>rgba(32,28,40, 0.55)</td>
</tr>
<tr>
<td>Deep Ocean</td>
<td>dark</td>
<td>#0a0e14</td>
<td>#182028</td>
<td>rgba(24,32,40, 0.55)</td>
</tr>
<tr>
<td>Soft Paper</td>
<td>light</td>
<td>#faf8f5</td>
<td>#f5f2ed</td>
<td>rgba(235,228,218, 0.40)</td>
</tr>
<tr>
<td>Morning Fog</td>
<td>light</td>
<td>#f4f6f8</td>
<td>#e8eaed</td>
<td>rgba(218,222,228, 0.40)</td>
</tr>
<tr>
<td>Sage Garden</td>
<td>light</td>
<td>#f5f8f5</td>
<td>#e8f0e8</td>
<td>rgba(218,232,218, 0.40)</td>
</tr>
<tr>
<td>Lavender Mist</td>
<td>light</td>
<td>#f8f6fa</td>
<td>#f0ecf4</td>
<td>rgba(228,222,236, 0.40)</td>
</tr>
<tr>
<td>Sand Dune</td>
<td>light</td>
<td>#f9f7f4</td>
<td>#f0ebe4</td>
<td>rgba(230,222,212, 0.40)</td>
</tr>
</tbody>
</table>
<h3 id="44-simplified-implementation-theme-agnostic">4.4 Simplified Implementation (Theme-Agnostic)</h3>
<p>Rather than computing per-theme, use a single approach that works everywhere:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c">/* Light themes */</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p">.</span><span class="nc">codemirror-editor-wrapper</span><span class="w"> </span><span class="p">.</span><span class="nc">cm-line</span><span class="p">.</span><span class="nc">cm-codeblock-line</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">color-mix</span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="n">srgb</span><span class="p">,</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-bg-tertiary</span><span class="p">)</span><span class="w"> </span><span class="mi">60</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-bg-primary</span><span class="p">)</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="p">);</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="p">}</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="c">/* Fence lines slightly more prominent */</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="p">.</span><span class="nc">codemirror-editor-wrapper</span><span class="w"> </span><span class="p">.</span><span class="nc">cm-line</span><span class="p">.</span><span class="nc">cm-codeblock-fence</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">color-mix</span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="n">srgb</span><span class="p">,</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-bg-tertiary</span><span class="p">)</span><span class="w"> </span><span class="mi">80</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-bg-primary</span><span class="p">)</span><span class="w"> </span><span class="mi">20</span><span class="kt">%</span><span class="p">);</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="p">}</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="c">/* Dark themes -- same logic, CSS handles it */</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="p">.</span><span class="nc">dark</span><span class="w"> </span><span class="p">.</span><span class="nc">codemirror-editor-wrapper</span><span class="w"> </span><span class="p">.</span><span class="nc">cm-line</span><span class="p">.</span><span class="nc">cm-codeblock-line</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">color-mix</span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="n">srgb</span><span class="p">,</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-bg-tertiary</span><span class="p">)</span><span class="w"> </span><span class="mi">65</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-bg-primary</span><span class="p">)</span><span class="w"> </span><span class="mi">35</span><span class="kt">%</span><span class="p">);</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Why <code>color-mix</code>?</strong> It uses the theme's own colors, automatically adapting to every theme (including custom themes) without any JS computation. Fallback for older browsers: use <code>bgTertiary</code> directly.</p>
<h3 id="45-contrast-verification">4.5 Contrast Verification</h3>
<p>The code chunk background must NOT reduce text contrast below WCAG AA (4.5:1). Since we are mixing between two of the theme's own surface colors (both designed to carry text), contrast is preserved by construction. The text color does not change inside code chunks.</p>
<hr />
<h2 id="5-typography">5. Typography</h2>
<h3 id="51-font-size-relationship">5.1 Font Size Relationship</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>Prose body:       var(--editor-font-size)         (default 15px)
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Code body:        calc(var(--editor-font-size) - 1px)   (14px -- 93%)
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>Chunk options:    calc(var(--editor-font-size) - 2px)   (13px -- 87%)
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>Fence markers:    calc(var(--editor-font-size) - 1px)   (14px -- 93%)
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>Language badge:   11px fixed                              (decorative)
</code></pre></div>
<p><strong>Rationale:</strong> Code at 93% of prose size is the sweet spot. Smaller and it strains the eyes. Larger and it competes with prose for attention. The 1px reduction (not a percentage) ensures the difference is subtle but consistent across font size preferences.</p>
<h3 id="52-font-family">5.2 Font Family</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">--code-font-family</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;JetBrains Mono&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;Fira Code&#39;</span><span class="o">,</span><span class="w"> </span><span class="nt">ui-monospace</span><span class="o">,</span><span class="w"> </span><span class="nt">monospace</span><span class="o">;</span>
</code></pre></div>
<p>Keep the existing JetBrains Mono stack. It is already established in the codebase and is an excellent choice for academic code (clear distinction between O/0, I/l/1, and good support for R/Python statistical operators).</p>
<p><strong>Do NOT use the prose font inside code chunks.</strong> The font switch is the single strongest signal that "this is code, not prose."</p>
<h3 id="53-line-height">5.3 Line Height</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Prose:  var(--editor-line-height)    (default 1.8)
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Code:   1.5                           (tighter, like a terminal)
</code></pre></div>
<p>Tighter line height in code chunks reinforces the visual distinction and is more natural for reading code. Academic prose needs generous line height for readability; code does not.</p>
<hr />
<h2 id="6-spacing-and-boundaries">6. Spacing and Boundaries</h2>
<h3 id="61-chunk-margins">6.1 Chunk Margins</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c">/* Top margin before opening fence */</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="p">.</span><span class="nc">cm-codeblock-fence-open</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span><span class="w">   </span><span class="c">/* breathing room from prose above */</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">  </span><span class="k">padding-top</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="p">}</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="c">/* Bottom margin after closing fence */</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="p">.</span><span class="nc">cm-codeblock-fence-close</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">  </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">  </span><span class="k">padding-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="p">}</span>
</code></pre></div>
<h3 id="62-left-border-accent-gutter">6.2 Left Border (Accent Gutter)</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">.</span><span class="nc">cm-codeblock-line</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="k">border-left</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="nf">color-mix</span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="n">srgb</span><span class="p">,</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-accent</span><span class="p">)</span><span class="w"> </span><span class="mi">40</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="kc">transparent</span><span class="p">);</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">  </span><span class="k">padding-left</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Change from current:</strong> Increase from 2px to 3px. Increase opacity from whatever the accent implies to an explicit 40%. The border should be noticeable but not a bright stripe. 40% accent is visible without screaming.</p>
<h3 id="63-right-boundary">6.3 Right Boundary</h3>
<p>No right border. The background fill and rounded corners on fence lines are sufficient. A right border would add visual noise for no information gain.</p>
<h3 id="64-full-width-background">6.4 Full-Width Background</h3>
<p>The background should extend to the full width of the editor content area, not just the text width. This creates the "panel" feeling that VS Code achieves with notebook cells.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">.</span><span class="nc">cm-codeblock-line</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="c">/* Extend background to fill editor width */</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="k">margin-left</span><span class="p">:</span><span class="w"> </span><span class="mi">-20</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">  </span><span class="k">margin-right</span><span class="p">:</span><span class="w"> </span><span class="mi">-20</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">  </span><span class="k">padding-left</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="kt">px</span><span class="p">;</span><span class="w">  </span><span class="c">/* 20px margin reclaim + 3px border */</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">  </span><span class="k">padding-right</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="7-language-badge">7. Language Badge</h2>
<h3 id="71-appearance">7.1 Appearance</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>  .--------------------------------------------.
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>  | ```{r}                               [ R ] |
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>  | ...                                        |
</code></pre></div>
<p>A small pill-shaped badge in the top-right of the opening fence line.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="p">.</span><span class="nc">cm-codeblock-lang-badge</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">inline-block</span><span class="p">;</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">  </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--code-font-family</span><span class="p">);</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">  </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">  </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">;</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">  </span><span class="k">letter-spacing</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">  </span><span class="k">text-transform</span><span class="p">:</span><span class="w"> </span><span class="kc">uppercase</span><span class="p">;</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-text-muted</span><span class="p">);</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="nf">color-mix</span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="n">srgb</span><span class="p">,</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-bg-tertiary</span><span class="p">)</span><span class="w"> </span><span class="mi">80</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="kc">transparent</span><span class="p">);</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">  </span><span class="k">opacity</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7</span><span class="p">;</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="p">}</span>
</code></pre></div>
<h3 id="72-visibility-behavior">7.2 Visibility Behavior</h3>
<p><strong>Always visible, low opacity.</strong> Do NOT make it hover-only. ADHD users scan documents quickly; the language badge is a wayfinding anchor. Making it hover-only defeats its purpose. Keep it at 70% opacity so it is findable without being loud.</p>
<h3 id="73-language-display-map">7.3 Language Display Map</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>{r}        -&gt; R
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>{python}   -&gt; PY
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>{julia}    -&gt; JL
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>{bash}     -&gt; SH
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>{sql}      -&gt; SQL
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>{ojs}      -&gt; OJS
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>{mermaid}  -&gt; MERMAID
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>{dot}      -&gt; DOT
</code></pre></div>
<p>Short uppercase abbreviations. The badge is for quick identification, not a label.</p>
<hr />
<h2 id="8-chunk-option-styling-lines">8. Chunk Option Styling (#| lines)</h2>
<h3 id="81-design">8.1 Design</h3>
<p>Chunk options are metadata, not code. They should be visually de-emphasized.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="p">.</span><span class="nc">cm-codeblock-option</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-text-muted</span><span class="p">);</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">  </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nb">calc</span><span class="p">(</span><span class="nf">var</span><span class="p">(</span><span class="nv">--editor-font-size</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">);</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">  </span><span class="k">opacity</span><span class="p">:</span><span class="w"> </span><span class="mf">0.85</span><span class="p">;</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">  </span><span class="k">font-style</span><span class="p">:</span><span class="w"> </span><span class="kc">italic</span><span class="p">;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="p">}</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="c">/* The #| prefix */</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="p">.</span><span class="nc">cm-codeblock-option-marker</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-accent</span><span class="p">);</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">  </span><span class="k">opacity</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">;</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">  </span><span class="k">font-style</span><span class="p">:</span><span class="w"> </span><span class="kc">normal</span><span class="p">;</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="p">}</span>
</code></pre></div>
<h3 id="82-rationale">8.2 Rationale</h3>
<ul>
<li><strong>Italic</strong> distinguishes options from code at a glance</li>
<li><strong>Smaller font</strong> creates hierarchy: prose &gt; code &gt; metadata</li>
<li><strong>Dimmed opacity</strong> pushes options into the background</li>
<li><strong>Accent-colored <code>#|</code> marker</strong> provides a subtle visual anchor</li>
</ul>
<hr />
<h2 id="9-fence-line-treatment">9. Fence Line Treatment</h2>
<h3 id="91-opening-fence-r">9.1 Opening Fence (<code>```{r}</code>)</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="p">.</span><span class="nc">cm-codeblock-fence-open</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--code-chunk-bg-fence</span><span class="p">);</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">  </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">  </span><span class="k">padding-top</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">  </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="nb">calc</span><span class="p">(</span><span class="nf">var</span><span class="p">(</span><span class="nv">--editor-font-size</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="p">);</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-text-muted</span><span class="p">);</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="p">}</span>
</code></pre></div>
<p>The opening fence is the "header" of the chunk. It gets a slightly stronger background than the body lines. The backticks and language specifier are displayed in muted text -- they are structural, not content.</p>
<h3 id="92-closing-fence">9.2 Closing Fence (<code>```</code>)</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="p">.</span><span class="nc">cm-codeblock-fence-close</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">  </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--code-chunk-bg-fence</span><span class="p">);</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">  </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">  </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">  </span><span class="k">padding-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-text-muted</span><span class="p">);</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="p">}</span>
</code></pre></div>
<h3 id="93-future-consideration-collapsed-fence-display">9.3 Future Consideration: Collapsed Fence Display</h3>
<p>Do NOT implement now, but design-compatible: a future "collapse chunk" feature could replace the body with a single line showing the language badge and option summary. The fence/badge architecture supports this without redesign.</p>
<hr />
<h2 id="10-interaction-patterns">10. Interaction Patterns</h2>
<h3 id="101-cursor-inside-chunk">10.1 Cursor Inside Chunk</h3>
<p>When the cursor is inside a code chunk, the left accent border brightens from 40% to 70% opacity. This provides a focus indicator without changing layout.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="p">.</span><span class="nc">cm-codeblock-line</span><span class="p">.</span><span class="nc">cm-codeblock-active</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">  </span><span class="k">border-left-color</span><span class="p">:</span><span class="w"> </span><span class="nf">color-mix</span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="n">srgb</span><span class="p">,</span><span class="w"> </span><span class="nf">var</span><span class="p">(</span><span class="nv">--nexus-accent</span><span class="p">)</span><span class="w"> </span><span class="mi">70</span><span class="kt">%</span><span class="p">,</span><span class="w"> </span><span class="kc">transparent</span><span class="p">);</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="p">}</span>
</code></pre></div>
<h3 id="102-hover-state">10.2 Hover State</h3>
<p><strong>No hover state on the chunk itself.</strong> Hover effects on large regions are distracting and provide no information. The chunk is not a button.</p>
<h3 id="103-focus-indicator-keyboard-navigation">10.3 Focus Indicator (Keyboard Navigation)</h3>
<p>The standard CodeMirror cursor and <code>cm-activeLine</code> highlight remain unchanged inside code chunks. The chunk background is designed to not interfere with the active line highlight.</p>
<h3 id="104-selection-inside-chunks">10.4 Selection Inside Chunks</h3>
<p>Selection highlight should remain the default CodeMirror selection color. The chunk background is low enough contrast that selection remains clearly visible on top of it.</p>
<hr />
<h2 id="11-what-not-to-include">11. What NOT to Include</h2>
<p>These VS Code Quarto features are deliberately excluded from Scribe:</p>
<table>
<thead>
<tr>
<th>VS Code Feature</th>
<th>Why Not in Scribe</th>
</tr>
</thead>
<tbody>
<tr>
<td>"Run Cell" CodeLens button</td>
<td>Scribe is a writing tool, not an IDE. Running code breaks flow</td>
</tr>
<tr>
<td>"Run Above" button</td>
<td>Same -- execution is not the writing workflow</td>
</tr>
<tr>
<td>Cell toolbar (collapse, etc)</td>
<td>Toolbar chrome is visual noise in a prose-first editor</td>
</tr>
<tr>
<td>Output cells below chunks</td>
<td>Output belongs in the rendered preview, not the source editor</td>
</tr>
<tr>
<td>Cell status indicators</td>
<td>No execution = no status to show</td>
</tr>
<tr>
<td>Drag-to-reorder cells</td>
<td>Prose interleaves with code; reordering is a text operation</td>
</tr>
<tr>
<td>Add Cell (+) buttons</td>
<td>Chunk insertion is via typing or completion, not UI buttons</td>
</tr>
<tr>
<td>Gutter line numbers in code</td>
<td>Distracting in a prose editor; not useful without execution</td>
</tr>
<tr>
<td>Syntax highlighting overhaul</td>
<td>Keep existing CodeMirror highlighting; don't reinvent</td>
</tr>
</tbody>
</table>
<p><strong>The guiding principle:</strong> Scribe helps you <em>write</em> Quarto documents. VS Code helps you <em>run</em> them. Every feature should answer: "Does this help the writer, or does it turn the editor into an IDE?"</p>
<hr />
<h2 id="12-accessibility">12. Accessibility</h2>
<h3 id="121-color-contrast">12.1 Color Contrast</h3>
<ul>
<li>Code text on chunk background: inherits theme text colors, which already meet WCAG AA (4.5:1) against <code>bgTertiary</code></li>
<li>Chunk options (dimmed): at 85% opacity of <code>textMuted</code>, verify each theme maintains 3:1 minimum for large text. All current themes pass.</li>
<li>Language badge: decorative text, not critical information; 70% opacity of <code>textMuted</code> is acceptable under WCAG for non-essential content</li>
</ul>
<h3 id="122-not-relying-on-color-alone">12.2 Not Relying on Color Alone</h3>
<p>Code chunks are distinguished by <strong>four independent cues</strong>:
1. Background color (visual region)
2. Font change (monospace vs prose)
3. Left border (spatial marker)
4. Font size reduction (typographic hierarchy)</p>
<p>Any three of these four are sufficient for identification. This exceeds WCAG 1.4.1 (Use of Color).</p>
<h3 id="123-screen-reader-considerations">12.3 Screen Reader Considerations</h3>
<p>The CodeMirror ARIA tree already announces code blocks. No additional ARIA attributes are needed for the visual styling changes. The language badge, if implemented as a widget, should have <code>aria-hidden="true"</code> since the language is already in the fence text.</p>
<h3 id="124-motion-and-animation">12.4 Motion and Animation</h3>
<p>No animations. No transitions on background color. Chunk appearance is static. The only dynamic element is the border opacity change on focus, which uses an instant CSS change (no <code>transition</code> property).</p>
<hr />
<h2 id="13-implementation-approach">13. Implementation Approach</h2>
<h3 id="131-phase-1-css-only-immediate">13.1 Phase 1: CSS-Only (Immediate)</h3>
<p>Update the existing CSS in <code>/Users/dt/projects/dev-tools/scribe/src/renderer/src/index.css</code> (lines 6231-6276):</p>
<ul>
<li>Replace <code>rgba(0,0,0,0.04)</code> with <code>color-mix()</code> expressions using theme variables</li>
<li>Increase left border from 2px to 3px</li>
<li>Add border-radius to fence lines</li>
<li>Add margin-top/margin-bottom spacing</li>
<li>Adjust font sizes to use <code>calc()</code> relative to <code>--editor-font-size</code></li>
</ul>
<p>This works with the existing <code>:has(.tok-codeFence)</code> and <code>:has(.tok-monospace)</code> selectors. No JS changes needed.</p>
<h3 id="132-phase-2-viewplugin-decoration-follow-up">13.2 Phase 2: ViewPlugin Decoration (Follow-up)</h3>
<p>The current CSS relies on <code>:has()</code> selectors matching token classes. This works but has limitations:
- Cannot distinguish opening vs closing fence
- Cannot apply full-width backgrounds reliably
- Cannot add the language badge</p>
<p>A ViewPlugin that walks the syntax tree and applies <code>Decoration.line()</code> classes would enable:
- <code>cm-codeblock-fence-open</code> vs <code>cm-codeblock-fence-close</code>
- <code>cm-codeblock-option</code> for <code>#|</code> lines
- <code>cm-codeblock-active</code> for lines under cursor
- Language badge via <code>Decoration.widget()</code></p>
<p><strong>Note:</strong> The CSS class <code>cm-codeblock-line</code> already exists in <code>index.css</code> but is never applied by any decoration in <code>CodeMirrorEditor.tsx</code>. Phase 2 would activate it.</p>
<h3 id="133-phase-3-language-badge-widget-future">13.3 Phase 3: Language Badge Widget (Future)</h3>
<p>A small <code>WidgetType</code> subclass that renders the language abbreviation pill. Positioned via <code>Decoration.widget()</code> at the end of the opening fence line.</p>
<hr />
<h2 id="14-visual-summary-before-and-after">14. Visual Summary: Before and After</h2>
<h3 id="light-theme-sage-garden">Light Theme (Sage Garden)</h3>
<p><strong>Before:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>  The results suggest that...           | #f5f8f5 bg (prose)
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>                                        |
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>  ```{r}                                | #f5f8f5 bg (barely different)
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>  #| label: fig-results                 | same
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>  library(ggplot2)                      | same
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>  ggplot(df, aes(x, y)) + geom_point() | same
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>  ```                                   | same
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>                                        |
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>  As shown in @fig-results, the...      | #f5f8f5 bg (prose)
</code></pre></div></p>
<p><strong>After:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>  The results suggest that...           | #f5f8f5 bg (prose)
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>                                        |
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>  .-- [R] ---------------------------.  |
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>  | ```{r}                           |  | #e0eae0 bg (clearly different)
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>  | #| label: fig-results            |  | #e0eae0, italic, smaller
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>  | library(ggplot2)                  |  | #e4ece4 bg
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>  | ggplot(df, aes(x,y))+geom_point()|  | #e4ece4 bg
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>  | ```                              |  | #e0eae0 bg
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>  &#39;-----------------------------------&#39; |
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>                                        |
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>  As shown in @fig-results, the...      | #f5f8f5 bg (prose)
</code></pre></div></p>
<h3 id="dark-theme-oxford-dark">Dark Theme (Oxford Dark)</h3>
<p><strong>Before:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>  The results suggest that...           | #0a0c10 bg
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>                                        |
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>  ```{r}                                | #0a0c10 bg (invisible difference)
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>  x &lt;- 42                               | same
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>  ```                                   | same
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>                                        |
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>  The variable x represents...          | #0a0c10 bg
</code></pre></div></p>
<p><strong>After:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>  The results suggest that...           | #0a0c10 bg
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>                                        |
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>  .-- [R] ---------------------------.  |
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>  | ```{r}                           |  | #141a22 bg (visible tint)
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>  | x &lt;- 42                          |  | #121720 bg
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>  | ```                              |  | #141a22 bg
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>  &#39;-----------------------------------&#39; |
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>                                        |
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>  The variable x represents...          | #0a0c10 bg
</code></pre></div></p>
<hr />
<h2 id="15-open-questions">15. Open Questions</h2>
<ol>
<li><strong>Language badge: always visible or cursor-in-chunk only?</strong> Current recommendation is always visible at 70% opacity. Could poll users.</li>
<li><strong>Should chunk options collapse when cursor is outside?</strong> Similar to how heading markers hide. Would reduce visual noise but adds complexity.</li>
<li><strong>Code font as a separate user preference?</strong> Currently hardcoded to JetBrains Mono. Could add a <code>--code-font-family</code> setting alongside the prose font picker.</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Data-Wise" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../javascripts/theme-toggle.js"></script>
      
    
  </body>
</html>